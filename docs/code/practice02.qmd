---
title: "第2講 練習問題"
subtitle: "統計データ解析"
date: "`r Sys.Date()`"
format:
    html: 
      toc: true
      html-math-method: katex
      self-contained: true
      grid: 
        margin-width: 350px
execute: 
  echo: true
  warning: false
reference-location: margin
citation-location: margin
tbl-cap-location: margin
fig-cap-location: margin
editor: visual
---

## 準備

データの操作と視覚化のために `tidyverse` パッケージを読み込む．

```{r}
#| warning: true
library(tidyverse)
```

::: column-margin
Quartoファイルの中で使われているパッケージがインストールされていない場合は， エディタ上部にインストールを促す警告が出るので，その指示に従ってインストールすればよい． 手動でインストールする場合は以下のいずれかを実行する．

-   Package タブからインストール
-   コンソール上で次のコマンドを実行 `install.packages("パッケージ名")`

`tidyverse` は第1講のサンプルで使っているので通常はインストールされているが， R言語のバージョンがアップグレードされた場合などに対応が必要となる．
:::

`library(tidyverse)` を実行すると読み込まれたパッケージが表示される． 同名の関数が存在する場合には *Conflicts* として衝突する関数名が表示される． 衝突する場合はパッケージ名を明示的に付ける必要がある． 例えば `filter()` には以下の2つがある．

-   `dplyer::filter()` データフレームの抽出のための関数
-   `stats::filter()` 時系列処理のための線形フィルタ関数

::: callout-tip
名前の衝突による不具合を避けたい場合は `conflicted` パッケージの利用を推奨する．

``` r
library(conflicted)
```
:::

## データフレームの作成

### 問題

次の表に対応するデータフレームを作成しなさい．

| name  | math | phys | chem | bio |
|:------|-----:|-----:|-----:|----:|
| Alice |   90 |   25 |   65 |  70 |
| Bob   |   80 |   50 |  100 |  50 |
| Carol |   70 |   75 |   70 |  30 |
| Dave  |   60 |  100 |   40 |  80 |
| Eve   |   50 |   80 |   75 | 100 |

```{r}

```

## ファイルの読み書き

### 問題

以下の問いに答えなさい．

1.  前の演習で作成したデータフレームを適当なファイルに書き出しなさい．
2.  書き出したファイルから別の変数に読み込みなさい．
3.  `pcr_case_daily.csv` (厚労省からダウンロードしたファイル)を変数 `pcr_data` に読み込みなさい．

```{r}

```

## データフレームの操作

### 問題

`pcr_case_daily.csv` から以下の条件を満たすデータを取り出しなさい．

1.  医療機関 (mi) での検査件数が2000を越えたときの国立感染症研究所 (niid) と医療機関 (mi) のデータ．
2.  大学等 (univ) と医療機関 (mi) でともに検査件数が2000を越えたデータ．
3.  2020年3月の各機関(sub,total は集計なので除く)の検査件数データ．

```{r}

```

## データフレームの集約

### 問題

`pcr_case_daily.csv` について以下の集計を行いなさい．

1.  各機関でのPCR検査件数の最大値．
2.  2021年の各機関でのPCR検査件数の月ごとの最大値．

```{r}

```

ヘルプを用いて `datasets::mtcars` の内容を調べた上で以下の集計を行いなさい．

1.  気筒数 (cyl) ごとに排気量 (disp) の最大値，最小値．
2.  気筒数 (cyl) とギア数 (gear) ごとの燃費 (mpg) の平均値．

```{r}

```

## 基本的なグラフの描画

### 問題

`pcr_case_daily.csv` を用いて以下の描画を行いなさい．

1.  検疫所 (b)，地方衛生研究所.保健所 (c)，民間検査会社 (d) における検査件数の推移．
2.  民間検査会社 (d)，大学等 (e)，医療機関 (f) での検査件数の関係 (散布図)．

```{r}

```

## 擬似乱数

### 問題

ヘルプを用いて以下の関数を調べよ．

1.  関数 `base::sample()`
2.  関数 `stats::rbinom()`
3.  関数 `stats::runif()`
4.  関数 `stats::rnorm()`
5.  関数 `base::set.seed()`

```{r}

```

以下の試行を実装してみよ．

1.  サイコロを10回振る．
2.  4枚のコインを投げたときの表の枚数．

```{r}

```

## 双六ゲーム

### 問題

以下の簡単な双六ゲームを考える．

-   ゴールまでのます目は100とする．
-   さいころを振り出た目の数だけ進む．
-   ゴールに辿り着くまで繰り返す．

さいころを振る回数の分布がどうなるか実験を行いなさい．

```{r}

```
