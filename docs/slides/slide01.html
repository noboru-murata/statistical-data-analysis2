<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Rによるデータ解析</title>
<meta name="author" content="村田 昇"/>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<link rel="stylesheet" href="./reveal.js/dist/reveal.css"/>

<link rel="stylesheet" href="./reveal.js/dist/theme/oer-reveal.css" id="theme"/>

<link rel="stylesheet" href="./reveal.js/plugin/toc-progress/toc-progress.css"/>

<link rel="stylesheet" href="./reveal.js/dist/theme/toc-style.css"/>

<link rel="stylesheet" href="./reveal.js/dist/theme/fonts/source-sans-pro/source-sans-pro.css"/>

<link rel="stylesheet" href="./reveal.js/plugin/accessibility/helper.css"/>

<link rel="stylesheet" href="./reveal.js/dist/theme/mycourse.css"/>
<link rel="stylesheet" href="./reveal.js/plugin/highlight/zenburn.css"/>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>
<body>
<div class="reveal">
<div class="slides">
<section id="sec-title-slide" data-state="no-toc-progress">
<!-- This is an HTML template for the title slide. -->
<!-- Embed logos as necessary. -->
<!-- <a class="nooutlink" href="url"><img class="state-background your-logo-class" src="whatever.png" alt="Whatever" /></a> -->
<div class="talk-title">
    <h1 class="no-toc-progress">Rによるデータ解析</h1>
</div>
<div class="talk-subtitle">
    <p>第1講 - さまざまな多変量解析とR言語の使い方</p>
</div>
<div class="keyboard-usage">
    <p>(Press <code>?</code> for help, <code>n</code> and <code>p</code> for next and previous slide)</p>
</div>
<div class="talk-author">
  <p>村田 昇<br />
  </p>
</div>

</section>
<section>
<section id="slide-org26e7d0b">
<h2 id="org26e7d0b">R言語の概要</h2>
<div class="outline-text-2" id="text-org26e7d0b">
</div>
</section>
<section id="slide-orga09c39a">
<h3 id="orga09c39a">R言語とは</h3>
<ul>
<li>統計計算のための言語と環境の総称</li>
<li>オープンソース・フリーソフトウェア</li>
<li>「パッケージ」を利用して容易に機能拡張が可能
<ul>
<li>パッケージの開発は非常に活発 (現在10000を越える)</li>
<li>最新の技術や方法が簡単に導入できることも多い</li>

</ul></li>
<li><a href="https://www.r-project.org/">https://www.r-project.org/</a> (プロジェクトのサイト)</li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org1f8288e">
<h3 id="org1f8288e">RStudioとは</h3>
<ul>
<li>RStudio社が開発している統合開発環境(IDE)
<ul>
<li>R によるデータ解析や統計計算・パッケージ開発を支援</li>
<li>OSに依存しない対話型操作環境を提供</li>

</ul></li>
<li>本講義ではRStudioを用いて説明を行う</li>
<li><a href="https://www.rstudio.com/">https://www.rstudio.com/</a> (RStudio社のサイト)</li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-orgeb3bd23">
<h3 id="orgeb3bd23">R言語の得意分野</h3>
<ul>
<li><b>データの分類・集計・整理</b>
<ul>
<li>記述統計量 (基本・要約統計量) の計算</li>
<li>グラフによる視覚化</li>
<li>さまざまな統計分析 (多変量解析を含む)</li>

</ul></li>
<li>プログラムによる <b>処理の自動化</b>
<b>確率的シミュレーション</b> (モンテカルロ法) <br />
 擬似乱数による不確定性を含む現象の模擬</li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org366cad5">
<h3 id="org366cad5">参考 : R言語のオンラインコース</h3>
<ul>
<li>RStudio Cloudの自習コース
<a href="https://rstudio.cloud/learn/primers">https://rstudio.cloud/learn/primers</a></li>
<li>Data Campの自習コース
<a href="https://www.datacamp.com/onboarding">https://www.datacamp.com/onboarding</a></li>

</ul>
<div class="slide-footer"><br></div>
</section>
</section>
<section>
<section id="slide-org8c393fd">
<h2 id="org8c393fd">多変量解析</h2>
<div class="outline-text-2" id="text-org8c393fd">
</div>
</section>
<section id="slide-org05c348b">
<h3 id="org05c348b">多変量解析とは</h3>
<ul>
<li>複数の変量からなるデータを分析する手法の総称
<ul>
<li>回帰分析 : 複数の量を用いて注目する変数の値を説明する</li>
<li>主成分分析 : 全体を説明する少数の特徴量を構成する</li>
<li>判別分析 : 特徴量の違いでカテゴリ分けを行う</li>
<li>クラスタ分析 : 特徴量の違いに着目してクラスタを構成する</li>
<li>時系列解析 : 時間とともに変化する現象を記述する</li>

</ul></li>
<li>機械学習で使われる手法の基礎
<ul>
<li>教師あり問題 : 回帰分析(量的データ)・判別分析(質的データ)</li>
<li>教師なし問題 : 主成分分析・クラスタ分析</li>

</ul></li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org507b151">
<h3 id="org507b151">回帰分析の考え方</h3>
<ul>
<li>ある変数(目的変数)を別の変数によって説明・予測するための関係式(回帰式)を構成する
<ul>
<li>単回帰 : 一つの変数で目的変数を説明する</li>
<li>重回帰 : 複数の変数で目的変数を説明する</li>

</ul></li>
<li><span style="color:green;">分析の事例</span>
<ul>
<li>広告宣伝費と商品の売上を予測する式を作り，広告効果があるかどうか判定する</li>
<li>築年数・駅からの距離・広さ・間取りで家賃を説明する式を作り，新規に家賃を設定する際に利用する</li>

</ul></li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org374d6e8">
<h3 id="org374d6e8">単回帰の例 (<code>MASS::Animals</code>)</h3>
<table id="orgbaabbcf" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 1:</span> 体重と脳の重さ</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-right">body [kg]</th>
<th scope="col" class="org-right">brain [g]</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Mountain beaver</td>
<td class="org-right">1.350</td>
<td class="org-right">8.1</td>
</tr>

<tr>
<td class="org-left">Cow</td>
<td class="org-right">465.000</td>
<td class="org-right">423.0</td>
</tr>

<tr>
<td class="org-left">Grey wolf</td>
<td class="org-right">36.330</td>
<td class="org-right">119.5</td>
</tr>

<tr>
<td class="org-left">Goat</td>
<td class="org-right">27.660</td>
<td class="org-right">115.0</td>
</tr>

<tr>
<td class="org-left">Guinea pig</td>
<td class="org-right">1.040</td>
<td class="org-right">5.5</td>
</tr>

<tr>
<td class="org-left">Dipliodocus</td>
<td class="org-right">11700.000</td>
<td class="org-right">50.0</td>
</tr>

<tr>
<td class="org-left">Asian elephant</td>
<td class="org-right">2547.000</td>
<td class="org-right">4603.0</td>
</tr>

<tr>
<td class="org-left">Donkey</td>
<td class="org-right">187.100</td>
<td class="org-right">419.0</td>
</tr>

<tr>
<td class="org-left">&#x2026;</td>
<td class="org-right">&#x2026;</td>
<td class="org-right">&#x2026;</td>
</tr>
</tbody>
</table>

<div class="slide-footer"><br></div>
</section>
<section>

<div id="org744356c" class="figure">
<p><img src="./figs/r-brainbody05.png" alt="r-brainbody05.png" width="55%" height="55%" />
</p>
<p><span class="figure-number">Figure 1: </span>体重と脳の重さの関係 (単回帰)</p>
</div>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org8bdb7ad">
<h3 id="org8bdb7ad">重回帰の例 (<code>wine.csv</code>)</h3>
<table id="orge7d214c" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 2:</span> ワインの価格と生産環境</caption>

<colgroup>
<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">年号</th>
<th scope="col" class="org-right">価格(対数)</th>
<th scope="col" class="org-right">冬の降雨</th>
<th scope="col" class="org-right">気温</th>
<th scope="col" class="org-right">秋の降雨</th>
<th scope="col" class="org-right">経過年</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">1952</td>
<td class="org-right">-0.99868</td>
<td class="org-right">600</td>
<td class="org-right">17.1167</td>
<td class="org-right">160</td>
<td class="org-right">31</td>
</tr>

<tr>
<td class="org-right">1953</td>
<td class="org-right">-0.4544</td>
<td class="org-right">690</td>
<td class="org-right">16.7333</td>
<td class="org-right">80</td>
<td class="org-right">30</td>
</tr>

<tr>
<td class="org-right">1954</td>
<td class="org-right">NA</td>
<td class="org-right">430</td>
<td class="org-right">15.3833</td>
<td class="org-right">180</td>
<td class="org-right">29</td>
</tr>

<tr>
<td class="org-right">1955</td>
<td class="org-right">-0.80796</td>
<td class="org-right">502</td>
<td class="org-right">17.15</td>
<td class="org-right">130</td>
<td class="org-right">28</td>
</tr>

<tr>
<td class="org-right">1956</td>
<td class="org-right">NA</td>
<td class="org-right">440</td>
<td class="org-right">15.65</td>
<td class="org-right">140</td>
<td class="org-right">27</td>
</tr>

<tr>
<td class="org-right">1957</td>
<td class="org-right">-1.50926</td>
<td class="org-right">420</td>
<td class="org-right">16.1333</td>
<td class="org-right">110</td>
<td class="org-right">26</td>
</tr>

<tr>
<td class="org-right">1958</td>
<td class="org-right">-1.71655</td>
<td class="org-right">582</td>
<td class="org-right">16.4167</td>
<td class="org-right">187</td>
<td class="org-right">25</td>
</tr>

<tr>
<td class="org-right">1959</td>
<td class="org-right">-0.418</td>
<td class="org-right">485</td>
<td class="org-right">17.4833</td>
<td class="org-right">187</td>
<td class="org-right">24</td>
</tr>

<tr>
<td class="org-right">&#x2026;</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
</tr>
</tbody>
</table>

<div class="slide-footer"><br></div>
</section>
<section>

<div id="orgd33af1d" class="figure">
<p><img src="./figs/r-wine01.png" alt="r-wine01.png" width="55%" height="55%" />
</p>
<p><span class="figure-number">Figure 2: </span>ワインの価格と生産環境の関係</p>
</div>

<div class="slide-footer"><br></div>
</section>
<section>

<div id="org20a2504" class="figure">
<p><img src="./figs/r-wine05.png" alt="r-wine05.png" width="55%" height="55%" />
</p>
<p><span class="figure-number">Figure 3: </span>生産環境によるワイン価格の予測 (重回帰)</p>
</div>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org0403ca8">
<h3 id="org0403ca8">主成分分析の考え方</h3>
<ul>
<li>多数の変数が与えられたときに，変数のもつ構造を効率的に記述できる少数個の特徴量を構成する</li>
<li><span style="color:green;">分析の事例</span>
<ul>
<li>野球選手の打撃成績(打率，本塁打数，打点など)から，打者としての特徴を記述する指標を作成する</li>
<li>複数銘柄からなる株価の時系列データから，市場全体の変動を記述する総合指標を作成する</li>

</ul></li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-orgc9c28e6">
<h3 id="orgc9c28e6">主成分分析の例 (<code>jpamenity.csv</code>)</h3>
<table id="org9e9cd67" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 3:</span> 県別の生活環境(一部)</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-right">昼夜人口比</th>
<th scope="col" class="org-right">年少人口比</th>
<th scope="col" class="org-right">老年人口比</th>
<th scope="col" class="org-right">人口増減率</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">北海道</td>
<td class="org-right">100.0</td>
<td class="org-right">11.7</td>
<td class="org-right">26.0</td>
<td class="org-right">-0.47</td>
</tr>

<tr>
<td class="org-left">青森県</td>
<td class="org-right">100.0</td>
<td class="org-right">12.1</td>
<td class="org-right">27.0</td>
<td class="org-right">-0.95</td>
</tr>

<tr>
<td class="org-left">岩手県</td>
<td class="org-right">99.7</td>
<td class="org-right">12.4</td>
<td class="org-right">27.9</td>
<td class="org-right">-0.84</td>
</tr>

<tr>
<td class="org-left">宮城県</td>
<td class="org-right">100.2</td>
<td class="org-right">13.0</td>
<td class="org-right">22.9</td>
<td class="org-right">-0.09</td>
</tr>

<tr>
<td class="org-left">秋田県</td>
<td class="org-right">99.9</td>
<td class="org-right">11.1</td>
<td class="org-right">30.7</td>
<td class="org-right">-1.12</td>
</tr>

<tr>
<td class="org-left">山形県</td>
<td class="org-right">99.8</td>
<td class="org-right">12.6</td>
<td class="org-right">28.3</td>
<td class="org-right">-0.78</td>
</tr>

<tr>
<td class="org-left">福島県</td>
<td class="org-right">99.6</td>
<td class="org-right">12.9</td>
<td class="org-right">26.1</td>
<td class="org-right">-1.41</td>
</tr>

<tr>
<td class="org-left">茨城県</td>
<td class="org-right">97.2</td>
<td class="org-right">13.2</td>
<td class="org-right">23.8</td>
<td class="org-right">-0.51</td>
</tr>

<tr>
<td class="org-left">&#x2026;</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
</tr>
</tbody>
</table>

<div class="slide-footer"><br></div>
</section>
<section>

<div id="org426bfcc" class="figure">
<p><img src="./figs/p-jpamenity01.png" alt="p-jpamenity01.png" width="55%" height="55%" />
</p>
<p><span class="figure-number">Figure 4: </span>県別の生活環境(人口動態)の散布図</p>
</div>

<div class="slide-footer"><br></div>
</section>
<section>

<div id="orgd654d98" class="figure">
<p><img src="./figs/p-jpamenity02.png" alt="p-jpamenity02.png" width="55%" height="55%" />
</p>
<p><span class="figure-number">Figure 5: </span>県別の生活環境(教育・労働)の散布図</p>
</div>

<div class="slide-footer"><br></div>
</section>
<section>

<div id="orgf37b763" class="figure">
<p><img src="./figs/p-jpamenity03.png" alt="p-jpamenity03.png" width="55%" height="55%" />
</p>
<p><span class="figure-number">Figure 6: </span>県別の生活環境(貯蓄・余暇)の散布図</p>
</div>

<div class="slide-footer"><br></div>
</section>
<section>

<div id="org42a4d49" class="figure">
<p><img src="./figs/p-jpamenity06.png" alt="p-jpamenity06.png" width="55%" height="55%" />
</p>
<p><span class="figure-number">Figure 7: </span>県別の生活環境の主成分分析</p>
</div>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org5ca3947">
<h3 id="org5ca3947">判別分析の考え方</h3>
<ul>
<li>ある個体が複数のクラスのいずれかに属するとき，その個体の特徴量からどのクラスに属するかを予測するモデルを構築する</li>
<li><span style="color:green;">分析の事例</span>
<ul>
<li>食道がんを患っている人とそうでない人を，年齢・飲酒量・喫煙度から判別する</li>
<li>銀行が融資判断をするために，企業の財務データから，その企業が期間内に債務不履行となるか否かを予測する</li>

</ul></li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org669a698">
<h3 id="org669a698">判別分析の例 (<code>MASS::biopsy</code>)</h3>
<table id="org7f79ce9" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 4:</span> 乳癌患者の生研検査</caption>

<colgroup>
<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">ID</th>
<th scope="col" class="org-right">V1</th>
<th scope="col" class="org-right">V2</th>
<th scope="col" class="org-right">V3</th>
<th scope="col" class="org-right">V4</th>
<th scope="col" class="org-right">V5</th>
<th scope="col" class="org-right">V6</th>
<th scope="col" class="org-right">V7</th>
<th scope="col" class="org-right">V8</th>
<th scope="col" class="org-right">V9</th>
<th scope="col" class="org-left">class</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">1000025</td>
<td class="org-right">5</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">2</td>
<td class="org-right">1</td>
<td class="org-right">3</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-left">benign</td>
</tr>

<tr>
<td class="org-right">1002945</td>
<td class="org-right">5</td>
<td class="org-right">4</td>
<td class="org-right">4</td>
<td class="org-right">5</td>
<td class="org-right">7</td>
<td class="org-right">10</td>
<td class="org-right">3</td>
<td class="org-right">2</td>
<td class="org-right">1</td>
<td class="org-left">benign</td>
</tr>

<tr>
<td class="org-right">1015425</td>
<td class="org-right">3</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">2</td>
<td class="org-right">2</td>
<td class="org-right">3</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-left">benign</td>
</tr>

<tr>
<td class="org-right">1016277</td>
<td class="org-right">6</td>
<td class="org-right">8</td>
<td class="org-right">8</td>
<td class="org-right">1</td>
<td class="org-right">3</td>
<td class="org-right">4</td>
<td class="org-right">3</td>
<td class="org-right">7</td>
<td class="org-right">1</td>
<td class="org-left">benign</td>
</tr>

<tr>
<td class="org-right">1017023</td>
<td class="org-right">4</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">3</td>
<td class="org-right">2</td>
<td class="org-right">1</td>
<td class="org-right">3</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-left">benign</td>
</tr>

<tr>
<td class="org-right">1017122</td>
<td class="org-right">8</td>
<td class="org-right">10</td>
<td class="org-right">10</td>
<td class="org-right">8</td>
<td class="org-right">7</td>
<td class="org-right">10</td>
<td class="org-right">9</td>
<td class="org-right">7</td>
<td class="org-right">1</td>
<td class="org-left">malignant</td>
</tr>

<tr>
<td class="org-right">1018099</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">2</td>
<td class="org-right">10</td>
<td class="org-right">3</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-left">benign</td>
</tr>

<tr>
<td class="org-right">1018561</td>
<td class="org-right">2</td>
<td class="org-right">1</td>
<td class="org-right">2</td>
<td class="org-right">1</td>
<td class="org-right">2</td>
<td class="org-right">1</td>
<td class="org-right">3</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-left">benign</td>
</tr>

<tr>
<td class="org-right">&#x2026;</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-left">&#x2026;</td>
</tr>
</tbody>
</table>

<div class="slide-footer"><br></div>
</section>
<section>

<div id="org3fd0677" class="figure">
<p><img src="./figs/d-biopsy01.png" alt="d-biopsy01.png" width="55%" height="55%" />
</p>
<p><span class="figure-number">Figure 8: </span>乳癌患者(良性・悪性)の生研検査の散布図</p>
</div>

<div class="slide-footer"><br></div>
</section>
<section>

<div id="org629b3f1" class="figure">
<p><img src="./figs/d-biopsy02.png" alt="d-biopsy02.png" width="55%" height="55%" />
</p>
<p><span class="figure-number">Figure 9: </span>生研検査の主成分分析</p>
</div>

<div class="slide-footer"><br></div>
</section>
<section>

<div id="orgba335db" class="figure">
<p><img src="./figs/d-biopsy03.png" alt="d-biopsy03.png" width="55%" height="55%" />
</p>
<p><span class="figure-number">Figure 10: </span>生研検査による乳癌患者の判別分析</p>
</div>
<div class="slide-footer"><br></div>
</section>
<section id="slide-orgfa8bd98">
<h3 id="orgfa8bd98">クラスタ分析の考え方</h3>
<ul>
<li>特徴量の違いに着目して，妥当な個体のグループ(クラスタ)を構成する
<ul>
<li>階層的な方法 : 系統樹を作成する</li>
<li>非階層的な方法 : グループの代表値を推定する</li>

</ul></li>
<li><span style="color:green;">分析の事例</span>
<ul>
<li>映画に関するアンケート調査から潜在的なジャンル(グループ)を抽出する</li>
<li>顧客の購買履歴から，嗜好の異なる顧客グループに分類し，グループごとの販売戦略を立てる</li>

</ul></li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-orga610dfa">
<h3 id="orga610dfa">クラスタ分析の例 (<code>omusubi.csv</code>)</h3>
<table id="orgf2b1745" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 5:</span> おむすびの具に関するアンケート</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-right">梅</th>
<th scope="col" class="org-right">鮭</th>
<th scope="col" class="org-right">昆布</th>
<th scope="col" class="org-right">鰹</th>
<th scope="col" class="org-right">明太</th>
<th scope="col" class="org-right">鱈子</th>
<th scope="col" class="org-right">ツナ</th>
<th scope="col" class="org-right">他</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">北海道</td>
<td class="org-right">13.86</td>
<td class="org-right">27.94</td>
<td class="org-right">5.58</td>
<td class="org-right">5.26</td>
<td class="org-right">9.26</td>
<td class="org-right">15.06</td>
<td class="org-right">11.61</td>
<td class="org-right">11.39</td>
</tr>

<tr>
<td class="org-left">青森</td>
<td class="org-right">14.93</td>
<td class="org-right">30.79</td>
<td class="org-right">7.01</td>
<td class="org-right">2.43</td>
<td class="org-right">10.36</td>
<td class="org-right">11.58</td>
<td class="org-right">11.58</td>
<td class="org-right">11.28</td>
</tr>

<tr>
<td class="org-left">岩手</td>
<td class="org-right">17.91</td>
<td class="org-right">23.13</td>
<td class="org-right">5.22</td>
<td class="org-right">3.35</td>
<td class="org-right">17.91</td>
<td class="org-right">10.07</td>
<td class="org-right">10.44</td>
<td class="org-right">11.94</td>
</tr>

<tr>
<td class="org-left">宮城</td>
<td class="org-right">15.16</td>
<td class="org-right">29.5</td>
<td class="org-right">10</td>
<td class="org-right">1.66</td>
<td class="org-right">14.83</td>
<td class="org-right">8.83</td>
<td class="org-right">12.83</td>
<td class="org-right">7.16</td>
</tr>

<tr>
<td class="org-left">秋田</td>
<td class="org-right">10.63</td>
<td class="org-right">31.38</td>
<td class="org-right">5.31</td>
<td class="org-right">3.19</td>
<td class="org-right">14.89</td>
<td class="org-right">13.29</td>
<td class="org-right">10.63</td>
<td class="org-right">10.63</td>
</tr>

<tr>
<td class="org-left">山形</td>
<td class="org-right">16.58</td>
<td class="org-right">20.27</td>
<td class="org-right">8.29</td>
<td class="org-right">1.38</td>
<td class="org-right">18.89</td>
<td class="org-right">10.13</td>
<td class="org-right">12.9</td>
<td class="org-right">11.52</td>
</tr>

<tr>
<td class="org-left">福島</td>
<td class="org-right">12.37</td>
<td class="org-right">21.99</td>
<td class="org-right">8.93</td>
<td class="org-right">3.43</td>
<td class="org-right">16.49</td>
<td class="org-right">9.62</td>
<td class="org-right">19.24</td>
<td class="org-right">7.9</td>
</tr>

<tr>
<td class="org-left">茨城</td>
<td class="org-right">15.42</td>
<td class="org-right">26.49</td>
<td class="org-right">7.98</td>
<td class="org-right">2.54</td>
<td class="org-right">18.33</td>
<td class="org-right">11.79</td>
<td class="org-right">11.79</td>
<td class="org-right">5.62</td>
</tr>

<tr>
<td class="org-left">&#x2026;</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
</tr>
</tbody>
</table>

<div class="slide-footer"><br></div>
</section>
<section>

<div id="org6aa9efb" class="figure">
<p><img src="./figs/c-omusubi01.png" alt="c-omusubi01.png" width="55%" height="55%" />
</p>
<p><span class="figure-number">Figure 11: </span>おむすびの具に関するアンケート分析 (県別の集計)</p>
</div>

<div class="slide-footer"><br></div>
</section>
<section>

<div id="orgb10ce5d" class="figure">
<p><img src="./figs/c-omusubi02.png" alt="c-omusubi02.png" width="55%" height="55%" />
</p>
<p><span class="figure-number">Figure 12: </span>アンケート結果にもとづく県のクラスタ分析</p>
</div>
<div class="slide-footer"><br></div>
</section>
<section id="slide-orgb73243c">
<h3 id="orgb73243c">時系列解析の考え方</h3>
<ul>
<li>時間とともに変化する現象を記述するために，未来の値を過去の値で近似する式を構成する
<ul>
<li>自己回帰 (ARモデル) : 過去の影響の記述</li>
<li>移動平均 (MAモデル) : 記憶のある不確定性</li>

</ul></li>
<li><span style="color:green;">分析の事例</span>
<ul>
<li>市町村の過去の年齢別の人口変動から将来の人口比率の推移を予測する</li>
<li>食品・飲料の季節ごとの販売履歴から，将来の需要量を予測して生産計画を立てる</li>

</ul></li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org2f233bb">
<h3 id="org2f233bb">時系列解析の例 (<code>datasets::AirPassengers</code>)</h3>
<table id="org45cee6a" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 6:</span> 米国航空機旅客量の変遷</caption>

<colgroup>
<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">&#xa0;</th>
<th scope="col" class="org-right">Jan</th>
<th scope="col" class="org-right">Feb</th>
<th scope="col" class="org-right">Mar</th>
<th scope="col" class="org-right">Apr</th>
<th scope="col" class="org-right">May</th>
<th scope="col" class="org-right">Jun</th>
<th scope="col" class="org-right">Jul</th>
<th scope="col" class="org-right">Aug</th>
<th scope="col" class="org-right">Sep</th>
<th scope="col" class="org-left">&#x2026;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">1949</td>
<td class="org-right">112</td>
<td class="org-right">118</td>
<td class="org-right">132</td>
<td class="org-right">129</td>
<td class="org-right">121</td>
<td class="org-right">135</td>
<td class="org-right">148</td>
<td class="org-right">148</td>
<td class="org-right">136</td>
<td class="org-left">&#x2026;</td>
</tr>

<tr>
<td class="org-right">1950</td>
<td class="org-right">115</td>
<td class="org-right">126</td>
<td class="org-right">141</td>
<td class="org-right">135</td>
<td class="org-right">125</td>
<td class="org-right">149</td>
<td class="org-right">170</td>
<td class="org-right">170</td>
<td class="org-right">158</td>
<td class="org-left">&#x2026;</td>
</tr>

<tr>
<td class="org-right">1951</td>
<td class="org-right">145</td>
<td class="org-right">150</td>
<td class="org-right">178</td>
<td class="org-right">163</td>
<td class="org-right">172</td>
<td class="org-right">178</td>
<td class="org-right">199</td>
<td class="org-right">199</td>
<td class="org-right">184</td>
<td class="org-left">&#x2026;</td>
</tr>

<tr>
<td class="org-right">1952</td>
<td class="org-right">171</td>
<td class="org-right">180</td>
<td class="org-right">193</td>
<td class="org-right">181</td>
<td class="org-right">183</td>
<td class="org-right">218</td>
<td class="org-right">230</td>
<td class="org-right">242</td>
<td class="org-right">209</td>
<td class="org-left">&#x2026;</td>
</tr>

<tr>
<td class="org-right">1953</td>
<td class="org-right">196</td>
<td class="org-right">196</td>
<td class="org-right">236</td>
<td class="org-right">235</td>
<td class="org-right">229</td>
<td class="org-right">243</td>
<td class="org-right">264</td>
<td class="org-right">272</td>
<td class="org-right">237</td>
<td class="org-left">&#x2026;</td>
</tr>

<tr>
<td class="org-right">1954</td>
<td class="org-right">204</td>
<td class="org-right">188</td>
<td class="org-right">235</td>
<td class="org-right">227</td>
<td class="org-right">234</td>
<td class="org-right">264</td>
<td class="org-right">302</td>
<td class="org-right">293</td>
<td class="org-right">259</td>
<td class="org-left">&#x2026;</td>
</tr>

<tr>
<td class="org-right">1955</td>
<td class="org-right">242</td>
<td class="org-right">233</td>
<td class="org-right">267</td>
<td class="org-right">269</td>
<td class="org-right">270</td>
<td class="org-right">315</td>
<td class="org-right">364</td>
<td class="org-right">347</td>
<td class="org-right">312</td>
<td class="org-left">&#x2026;</td>
</tr>

<tr>
<td class="org-right">&#x2026;</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-left">&#x2026;</td>
</tr>
</tbody>
</table>

<div class="slide-footer"><br></div>
</section>
<section>

<div id="org40b7466" class="figure">
<p><img src="./figs/t-airpass01.png" alt="t-airpass01.png" width="55%" height="55%" />
</p>
<p><span class="figure-number">Figure 13: </span>米国航空機旅客量の変遷</p>
</div>

<div class="slide-footer"><br></div>
</section>
<section>

<div id="orgf70b2f2" class="figure">
<p><img src="./figs/t-airpass04.png" alt="t-airpass04.png" width="55%" height="55%" />
</p>
<p><span class="figure-number">Figure 14: </span>階差時系列の自己相関分析</p>
</div>

<div class="slide-footer"><br></div>
</section>
<section>

<div id="orgc5500dc" class="figure">
<p><img src="./figs/t-airpass12.png" alt="t-airpass12.png" width="55%" height="55%" />
</p>
<p><span class="figure-number">Figure 15: </span>航空機旅客量の予測 (SARIMAモデルによる)</p>
</div>
<div class="slide-footer"><br></div>
</section>
</section>
<section>
<section id="slide-orgf002f2f">
<h2 id="orgf002f2f">RStudio の構成</h2>
<div class="outline-text-2" id="text-orgf002f2f">
</div>
</section>
<section id="slide-org04c2fd7">
<h3 id="org04c2fd7">起動画面</h3>
<ul>
<li>以下 <b>RStudio</b> を用いて説明する</li>
<li>複数の <b>タブ</b> (tab; つまみ) を含む4つの <b>ペイン</b> (pane; 枠) が立ち上がる
<ul>
<li>左上 : エディタ・表など (開いていない場合もある)</li>
<li>左下 : コンソール・ターミナルなど</li>
<li>右上 : 作業環境内の変数・コマンド履歴など</li>
<li>右下 : パッケージ・グラフィックス・ヘルプなど</li>

</ul></li>
<li>ペインの配置や数は個別に設定することができる
<ul>
<li>メニュー : <b>Tools &gt; Global Options</b> で設定</li>

</ul></li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-orgec7147a">
<h3 id="orgec7147a">コンソール (左下ペイン)</h3>
<ul>
<li>R言語で記述されたコマンドを入力する
<ul>
<li><p>
例えば以下のような計算を行うことができる
</p>
<div class="org-src-container">

<pre><code class="R" >#' 一般的な数式を入力すれば計算機として使える
#' "#" 以降はコメントとして無視される
1 + 2 + 3 + 4 # 空白は無視される
sin(pi/3) / cos(pi/3) # tan(pi/3) になるはず
</code></pre>
</div></li>
<li><p>
コンソール上で終了を指示する以下のコマンドを入力すれば
R を終了させることができる
</p>
<div class="org-src-container">

<pre><code class="R" >#' R の終了には q() または quit() を用いる
q()
</code></pre>
</div>
<ul>
<li>メニューの <b>Quit RStudio</b> も利用可能</li>
<li>終了できない場合はOSの機能で強制終了する必要がある</li>

</ul></li>

</ul></li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org20ee740">
<h3 id="org20ee740">エディタ (左上ペイン)</h3>
<ul>
<li>コマンドを記述したファイルを扱う</li>
<li>一連のコマンドをまとめたり，修正しながら実行するための機能
<ul>
<li><span style="color:orange;">コンソールに入力したコマンドは直ちに実行されてしまう</span></li>
<li>コマンドを実行順に記述したファイル <b>R Script</b> を作成</li>
<li>ファイル(の一部)を実行</li>
<li>ファイルを保存</li>

</ul></li>
<li>同一ファイル内でプログラムと文書を記述する機能もあるが，本講義では扱わない (R Markdown, Quarto など)</li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org970be63">
<h3 id="org970be63">ヘルプ (右下ペイン)</h3>
<ul>
<li>各関数の詳細を記述したヘルプが利用できる
<ul>
<li>機能，引数名，引数の既定値，実行例などが参照できる</li>

</ul></li>
<li>右下ペイン <b>Help</b> タブ右上の検索窓から探索</li>
<li>ヘルプ内の検索はその下の <b>Find in Topic</b> で可能</li>
<li>コンソール内では関数 <code>help()</code> や <code>?</code> などを利用</li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org17f05a8">
<h3 id="org17f05a8">パッケージ (右下ペイン)</h3>
<ul>
<li>パッケージを用いて機能を拡張する</li>
<li>RStudio でのインストール手順
<ul>
<li>右下ペイン <b>Package</b> タブをクリック</li>
<li>左上の <b>Install</b> をクリック</li>
<li>パッケージ名を入力し <b>Install</b> をクリック</li>

</ul></li>
<li>利用可能なパッケージの情報は
右下ペイン <b>Package</b> タブで確認できる</li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org7e92bd7">
<h3 id="org7e92bd7">作業ディレクトリ</h3>
<ul>
<li>プログラムが実行されるディレクトリ(フォルダ)</li>
<li>作業ディレクトリにあるファイルの読み書きはパスを指定する必要がない</li>
<li>現在の作業ディレクトリは <b>Console</b> タブで確認</li>
<li>メニュー : <b>Session &gt; Set Working Directory</b> で指定
<ul>
<li>読み込んだファイルの場所を選択</li>
<li><b>Files</b> タブ (右下ペイン) の場所を選択 (<b>More</b> からも選択可)</li>
<li>ディレクトリを直接選択</li>

</ul></li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-orge939f83">
<h3 id="orge939f83">プロジェクト</h3>
<ul>
<li>作業環境をまとめて設定・保存する機能
<ul>
<li>作成したプロジェクトは <b>Project</b> ボタン(右上)から選択可能</li>
<li>いつでもプロジェクトを中断可能</li>
<li>プロジェクト毎に履歴や変数を保存可能</li>
<li>複数のプロジェクトを定義可能</li>

</ul></li>
<li>一般的なプロジェクトの作成手順
<ul>
<li><b>Project</b> ボタンから <b>New Project</b> を選択</li>
<li><b>Create Project</b> ダイアログで <b>New Directory</b> を選択
<ul>
<li>既にあるディレクトリを用いる場合は <b>Existing Directory</b></li>
<li>Github などを利用する場合は <b>Version Control</b></li>

</ul></li>
<li><b>Project Type</b> ダイアログで <b>New Project</b> を選択</li>
<li><b>Directry Name</b> とその親ディレクトリを指定</li>

</ul></li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-orge9f4139">
<h3 id="orge9f4139">終了時の注意</h3>
<ul>
<li><p>
終了時にコンソールに以下のメッセージが表示される場合がある
</p>
<div class="org-src-container">

<pre><code class="R" >&gt; q()
Save workspace image? [y/n/c]:     
</code></pre>
</div></li>
<li>作業で使った変数などをセーブするか尋ねている
<ul>
<li><code>y</code> を入力: セーブする (yesの略)</li>
<li><code>n</code> を入力: セーブしない (noの略)</li>
<li><code>c</code> を入力: Rの終了をキャンセルする (cancelの略)</li>

</ul></li>
<li>セーブした場合次回起動時に読み込まれる</li>

</ul>
<div class="slide-footer"><br></div>
</section>
</section>
<section>
<section id="slide-org3430fad">
<h2 id="org3430fad">基本的な使い方</h2>
<div class="outline-text-2" id="text-org3430fad">
</div>
</section>
<section id="slide-orgc4f3e59">
<h3 id="orgc4f3e59">式の入力</h3>
<ul>
<li>四則演算や数学関数は直感的な文法で計算可能</li>

</ul>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 7:</span> 基本的な演算と関数</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">加減乗除</td>
<td class="org-left"><code>+, -, *, /</code></td>
</tr>

<tr>
<td class="org-left">羃乗</td>
<td class="org-left"><code>^</code> または <code>**</code></td>
</tr>

<tr>
<td class="org-left">三角関数</td>
<td class="org-left"><code>sin(), cos(), tan()</code></td>
</tr>

<tr>
<td class="org-left">逆三角関数</td>
<td class="org-left"><code>asin(), acos(), atan()</code></td>
</tr>

<tr>
<td class="org-left">指数関数</td>
<td class="org-left"><code>exp()</code></td>
</tr>

<tr>
<td class="org-left">対数関数</td>
<td class="org-left"><code>log(), log10(), log2()</code></td>
</tr>

<tr>
<td class="org-left">双曲線関数</td>
<td class="org-left"><code>sinh(), cosh(), tanh()</code></td>
</tr>

<tr>
<td class="org-left">平方根</td>
<td class="org-left"><code>sqrt()</code></td>
</tr>

<tr>
<td class="org-left">絶対値</td>
<td class="org-left"><code>abs()</code></td>
</tr>
</tbody>
</table>
<div class="slide-footer"><br></div>
</section>
<section id="slide-orgbac6278">
<h3 id="orgbac6278">電卓として使う</h3>
<ul>
<li><p>
<span style="color:green;">コンソール上での計算例</span>
</p>
<div class="org-src-container">

<pre><code class="R" >#' 与えられた式の計算をコンソール上で実行してみよう
#' 1 x 2 + 3^2 の計算
1 * 2 + 3^2
#' sin(2π) の計算
sin(2*pi)
#' √2 + |-0.6| の計算
sqrt(2) + abs(-0.6)
</code></pre>
</div>

<pre class="example">
[1] 11
[1] -2.449294e-16
[1] 2.014214
</pre></li>

<li>入力内容は右上の <b>History</b> タブで確認可能</li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org0509f44">
<h3 id="org0509f44">エディタから実行する</h3>
<ul>
<li>新規ファイルの作成 (以下のいずれか)
<ul>
<li>左上の <b>+</b> から
<b>R Script</b> を選択</li>
<li><b>File</b> から
<b>New File</b> を選択，
更に <b>R Script</b> を選択</li>

</ul></li>
<li>エディタ上でコマンドを記述</li>
<li>実行範囲の選択
<ul>
<li>一行のみ: カーソルをその行に移動</li>
<li>複数行: クリックしてながら移動して選択する</li>

</ul></li>
<li>選択範囲の実行 (以下のいずれか)
<ul>
<li>左上の <b>Run</b> をクリック</li>
<li><b>Code</b> から 
<b>Selected Line(s)</b> を選択
(Ctrl/Command+Enter)</li>

</ul></li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-orgee859ee">
<h3 id="orgee859ee">R Script ファイルを保存する</h3>
<ul>
<li>以下のいずれかで保存することができる
<ul>
<li>左上のディスクのマークをクリック</li>
<li><b>File</b> から 
<b>Save</b> を選択 (Ctrl/Command+S)</li>

</ul></li>
<li>ファイル作成に関する注意
<ul>
<li>保存する時にファイル名の入力が求められる</li>
<li>拡張子は通常
<b>.R</b> または
<b>.r</b> を利用する</li>
<li><b>#</b> 以降の文字列は実行されないのでコメントとして有用</li>

</ul></li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org8c852ef">
<h3 id="org8c852ef">関数</h3>
<ul>
<li>関数の取り扱いは一般的な計算機言語とほぼ同様
<ul>
<li>関数は引数とその値を指定して実行(引数がない場合もある)</li>
<li>引数名は順序を守れば省略可能</li>

</ul></li>
<li><p>
関数の呼び出し方 (関数名を <code>f</code> とする)
</p>
<div class="org-src-container">

<pre><code class="R" >f(arg1 = value1, arg2 = value2) # 擬似コード
#' arg1, arg2 は引数の名前，value1, value2 は引数に渡す値を表す
f(value1, value2) # 上と同値．順序に注意
</code></pre>
</div>
<ul>
<li><b>擬似コード</b> = 実行しても動かないコード</li>

</ul></li>
<li>実装されている関数の使い方は <code>help(関数名)</code> または <code>?関数名</code> で
ヘルプが表示される</li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org6d41237">
<h3 id="org6d41237">関数の実行例</h3>
<ul>
<li><p>
<span style="color:green;">正弦関数の計算</span>
</p>
<div class="org-src-container">

<pre><code class="R" >#' 正弦関数(引数が1つ)の計算例
sin(x = pi/2) 
sin(pi/2) # 引数名は省略でき，前の行とこの行は同じ結果になる
</code></pre>
</div></li>
<li><p>
<span style="color:green;">対数関数の計算</span>
</p>
<div class="org-src-container">

<pre><code class="R" >#' 対数関数(引数が2つ)の計算例
#' 以下は擬似コード．a, b を適当な数値に置き換えて実行しなさい
log(a, b) # 底を b とする a の対数 
log(x = a, base = b) #上と同値
log(base = b, x = a) #上と同値(引数名があれば順序は自由に変えられる)
log(b, a) # = log(x=b,base=a) (引数名がなければ規定の順序で解釈される)
log(a) # 自然対数 =log(a,base=exp(1))
</code></pre>
</div></li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org3e874f9">
<h3 id="org3e874f9">ヘルプ機能</h3>
<ul>
<li>各関数の詳細を記述したヘルプが用意されている
<ul>
<li>Description (機能の概要)</li>
<li>Usage (関数の呼び出し方)</li>
<li>Arguments (関数の引数)</li>
<li>Value (関数の返り値)</li>
<li>Examples (実行例)</li>

</ul></li>
<li>ヘルプに関連する関数
<ul>
<li><code>help()</code> (使い方や例の表示)</li>
<li><code>example()</code> (例を実際に実行してくれる)</li>
<li><code>help.search()</code> (キーワード検索)</li>

</ul></li>
<li>右下ペイン <b>Help</b> タブの利用
<ul>
<li>右上にある検索窓でヘルプを参照可能</li>
<li>左上にある検索窓はヘルプ内を検索可能</li>

</ul></li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org2cf61a7">
<h3 id="org2cf61a7">ヘルプ機能の利用例</h3>
<ul>
<li><p>
<span style="color:green;">ヘルプの使い方</span> 
</p>
<div class="org-src-container">

<pre><code class="R" >#' 関数 log() に関するヘルプの例
help(log) # Helpタブに結果は表示される
?log # 上と同値
example(log) # ヘルプ内の例を実行
help.search("log") # "log"に関連する項目は？
??"log" # 上と同値
</code></pre>
</div>
<ul>
<li>右下ペインの <b>Help</b> タブに表示される</li>

</ul></li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org0c6d765">
<h3 id="org0c6d765">データ型</h3>
<ul>
<li>Rではさまざまな数値を扱うことができる
<ul>
<li>実数および複素数 (指数表記にも対応)</li>
<li>無限大や不定な数など特殊なものにも対応</li>

</ul></li>

</ul>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 8:</span> 代表的なデータ型</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">型の名称</th>
<th scope="col" class="org-left">役割</th>
<th scope="col" class="org-left">例</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>numeric</code></td>
<td class="org-left">(広義の)実数を表す</td>
<td class="org-left"><code>1, pi, NaN</code></td>
</tr>

<tr>
<td class="org-left"><code>complex</code></td>
<td class="org-left">複素数を表す</td>
<td class="org-left"><code>1i, 3-4i</code></td>
</tr>

<tr>
<td class="org-left"><code>character</code></td>
<td class="org-left">文字列を表す</td>
<td class="org-left"><code>"foo", "Hello World!"</code></td>
</tr>

<tr>
<td class="org-left"><code>logical</code></td>
<td class="org-left">論理値(真偽)を表す</td>
<td class="org-left"><code>TRUE, FALSE, 3&lt;4, NA</code></td>
</tr>
</tbody>
</table>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org9cf1f9e">
<h3 id="org9cf1f9e">オブジェクト</h3>
<ul>
<li>変数，関数，計算結果などを <b>オブジェクト</b> と呼ぶ</li>
<li>文字列を変数名としてオブジェクトを保持することができる</li>
<li>オブジェクトの内容を別のオブジェクトに代入することができる</li>
<li>保持しているオブジェクトの情報は右上ペインの
<b>Environment</b> タブで確認できる</li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-orgebb13ff">
<h3 id="orgebb13ff">オブジェクトの代入の例</h3>
<ul>
<li><p>
<span style="color:green;">代入操作の例</span>
</p>
<div class="org-src-container">

<pre><code class="R" >#' 数値を変数 foo に代入する
(foo &lt;- 3) # foo &lt;- 3; print(foo) と等価
#' 変数 foo を用いて計算し，結果を bar に代入する
bar &lt;- sin(2/3*pi) + cos(foo * pi/4) # 計算結果は表示されない
#' 変数 bar の内容を表示する
print(bar)
</code></pre>
</div>

<pre class="example">
[1] 3
[1] 0.1589186
</pre>


<ul>
<li>計算結果や良く使う文字列の保存に利用できる</li>
<li>変数名は自由に決められるが，
予約語 <code>c, q, t, C, D, F, I, T</code> には注意が必要</li>

</ul></li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-orge428e62">
<h3 id="orge428e62">自作関数</h3>
<ul>
<li>他の言語と同様にRでも関数を定義できる</li>
<li><p>
関数の定義には関数 <code>function()</code> を利用する 
</p>
<div class="org-src-container">

<pre><code class="R" >#' 関数 function() の使い方 (擬似コード)
関数名 &lt;- function(引数){ # 計算ブロックの開始
  ## このブロック内に必要な手続きを記述する．複数行に渡って構わない
  return(返値) # 計算結果を明示的に示す
} # ブロックの終了
</code></pre>
</div></li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org5caf417">
<h3 id="org5caf417">自作関数の例</h3>
<ul>
<li><p>
<span style="color:green;">縦と横の長さを与えて長方形の面積を計算</span>
</p>
<div class="org-src-container">

<pre><code class="R" >#' 縦の長さ a, 横の長さ b (既定値は1) の長方形の面積
foo &lt;- function(a, b = 1){ 
  out &lt;- a * b 
  return(out) # 計算結果を外に返却
}
#' 実行例
foo(2, 3) # foo(a = 2, b = 3) と同義
foo(2) # foo(a = 2, b = 1) と同義
</code></pre>
</div>

<pre class="example">
[1] 6
[1] 2
</pre></li>

</ul>

<div class="slide-footer"><br></div>
</section>
<section>
<ul>
<li><p>
<span style="color:green;">無名関数 (anonymous function) の作り方</span>
</p>
<div class="org-src-container">

<pre><code class="R" >#' 変数や関数を定義して計算する方法
(x &lt;- 1:10/10)
foo &lt;- function(x) sin(x)/x # 式の計算結果を返却(returnを省略可)
foo(x)
#' 変数や関数を定義せずに計算する方法
(function(x) sin(x)/x)(1:10/10)
(\(x) sin(x)/x)(1:10/10) # R 4.1 以降の短縮表現
</code></pre>
</div>

<pre class="example">
[1] 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1.0
[1] 0.9983342 0.9933467 0.9850674 0.9735459 0.9588511 0.9410708 0.9203110
 [8] 0.8966951 0.8703632 0.8414710
[1] 0.9983342 0.9933467 0.9850674 0.9735459 0.9588511 0.9410708 0.9203110
 [8] 0.8966951 0.8703632 0.8414710
[1] 0.9983342 0.9933467 0.9850674 0.9735459 0.9588511 0.9410708 0.9203110
 [8] 0.8966951 0.8703632 0.8414710
</pre>


<ul>
<li>オブジェクト(変数や関数)を作成する必要がない場合に有用</li>

</ul></li>

</ul>

<div class="slide-footer"><br></div>
</section>
<section>
<ul>
<li><p>
<span style="color:green;">練習</span>
</p>
<blockquote>
<ul>
<li>R の関数 integrate() についてヘルプを調べなさい．</li>
<li><p>
以下の関数の定積分を求めなさい．
</p>
<div>
\begin{align}
  f(x)&=\frac{1}{1+x^{2}},\quad x\in[0,1]\\
  g(x)&=\exp\left( -\frac{x^{2}}{2} \right),\quad x\in\mathbb{R}
\end{align}

</div></li>

</ul>
</blockquote></li>

</ul>

<div class="slide-footer"><br></div>
</section>
<section>
<ul>
<li><p>
<span style="color:green;">関数 integrate() を利用して定積分を計算</span>
</p>
<div class="org-src-container">

<pre><code class="R" >#' 関数 1/(1+x^2) を区間 [0,1] で積分 (関数オブジェクトを渡す書き方)
f &lt;- function(x) 1/(1+x^2) # 関数を定義
integrate(f, 0, 1) # pi/4 
#' 関数 e^(-x^2/2) を実軸全体で積分(Gauss積分) (関数を定義しない書き方)
integrate(\(x)exp(-x^2/2), -Inf, Inf) # sqrt(2*pi)
</code></pre>
</div>

<pre class="example">
0.7853982 with absolute error &lt; 8.7e-15
2.506628 with absolute error &lt; 0.00023
</pre></li>

</ul>
<div class="slide-footer"><br></div>
</section>
</section>
<section>
<section id="slide-org4099655">
<h2 id="org4099655">次回の予定</h2>
<ul>
<li>データの取り扱い</li>
<li>描画の基礎</li>
<li>確率シミュレーション</li>

</ul>
<div class="slide-footer"><br></div>
</div>
</div>
<script src="./reveal.js/dist/reveal.js"></script>
<script src="./reveal.js/plugin/notes/notes.js"></script>
<script src="./reveal.js/plugin/search/search.js"></script>
<script src="./reveal.js/plugin/zoom/zoom.js"></script>
<script src="./reveal.js/plugin/highlight/highlight.js"></script>
<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({

controls: true,
progress: true,
history: true,
center: true,
slideNumber: 'c',
rollingLinks: false,
keyboard: true,
mouseWheel: false,
fragmentInURL: true,
hashOneBasedIndex: false,
pdfSeparateFragments: false,
overview: true,

transition: 'fade',
transitionSpeed: 'default',
spotlight: { size: 90, initialPresentationMode: false }, chalkboard: { toggleChalkboardButton: { left: '80px' }, toggleNotesButton: { left: '130px'}}, keyboard: { 69: function() { RevealChalkboard.toggleNotesCanvas() }, 87: function() { RevealChalkboard.toggleChalkboard() }, 67: function() { RevealChalkboard.clear() }, 82: function() { RevealChalkboard.reset() }, 68: function() { RevealChalkboard.download() }, 88: function() { RevealChalkboard.colorNext() }, 89: function() { RevealChalkboard.colorPrev() }, 84: function() { RevealSpotlight.toggleSpotlight() }, 81: function() { RevealSpotlight.togglePresentationMode()}},

// Plugins with reveal.js 4.x
plugins: [ RevealNotes, RevealSearch, RevealZoom, RevealHighlight ],

// Optional libraries used to extend reveal.js
dependencies: [
{ src: './reveal.js/plugin/menu/menu.js'},
{ src: './reveal.js/plugin/chalkboard/chalkboard.js'},
{ src: './reveal.js/plugin/spotlight/spotlight.js'}]

});
</script>
</body>
</html>
