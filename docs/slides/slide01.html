<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Rによるデータ解析</title>
<meta name="author" content="村田 昇"/>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<link rel="stylesheet" href="./reveal.js/dist/reveal.css"/>

<link rel="stylesheet" href="./reveal.js/dist/theme/oer-reveal.css" id="theme"/>

<link rel="stylesheet" href="./reveal.js/dist/theme/fonts/source-sans-pro/source-sans-pro.css"/>

<link rel="stylesheet" href="./reveal.js/plugin/menu/menu.css"/>

<link rel="stylesheet" href="./reveal.js/plugin/drawer/drawer.css"/>

<link rel="stylesheet" href="./reveal.js/dist/theme/mycourse.css"/>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>
<body>
<div class="reveal">
<div class="slides">
<section id="sec-title-slide">
<!-- This is an HTML template for the title slide. -->
<!-- Embed logos as necessary. -->
<!-- <a class="nooutlink" href="url"><img class="state-background your-logo-class" src="whatever.png" alt="Whatever" /></a> -->
<div class="talk-title">
    <h1 class="no-toc-progress">Rによるデータ解析</h1>
</div>
<div class="talk-subtitle">
    <p>第1講 - さまざまな多変量解析とR言語の使い方</p>
</div>
<div class="keyboard-usage">
    <p>(Press <code>?</code> for help, <code>n</code> and <code>p</code> for next and previous slide)</p>
</div>
<div class="talk-author">
  <p>村田 昇<br />
  </p>
</div>

</section>
<section>
<section id="slide-orgaee4537">
<h2 id="orgaee4537">R言語の概要</h2>
</section>
<section id="slide-org834246d">
<h3 id="org834246d">R言語とは</h3>
<ul>
<li>統計計算のための言語と環境の総称</li>
<li>オープンソース・フリーソフトウェア</li>
<li><b>パッケージ</b> を利用して容易に機能拡張が可能
<ul>
<li>パッケージの開発は非常に活発 (現在10000を越える)</li>
<li>最新の技術や方法が簡単に導入できることも多い</li>

</ul></li>
<li><a href="https://www.r-project.org/">https://www.r-project.org/</a> (プロジェクトのサイト)</li>

</ul>
</section>
<section id="slide-orgf85938f">
<h3 id="orgf85938f">RStudioとは</h3>
<ul>
<li>RStudio社が開発している統合開発環境 (IDE)
<ul>
<li>R によるデータ解析や統計計算・パッケージ開発を支援</li>
<li>OSに依存しない対話型操作環境を提供</li>

</ul></li>
<li>本講義ではRStudioを用いて説明を行う</li>
<li><a href="https://posit.co">https://posit.co</a> (Posit Software のサイト)</li>

</ul>
</section>
<section id="slide-org0314ac5">
<h3 id="org0314ac5">R言語の得意分野</h3>
<ul>
<li><b>データの分類・集計・整理</b>
<ul>
<li>記述統計量 (基本・要約統計量) の計算</li>
<li>グラフによる視覚化</li>
<li>さまざまな統計分析 (多変量解析を含む)</li>

</ul></li>
<li>プログラムによる <b>処理の自動化</b></li>
<li><b>確率的シミュレーション</b> (モンテカルロ法) 
<ul>
<li>擬似乱数による不確定性を含む現象の模擬</li>

</ul></li>

</ul>
</section>
<section id="slide-org47c7282">
<h3 id="org47c7282">参考 : R言語のオンラインコース</h3>
<ul>
<li>RStudio の初心者向ガイド <br />
<a href="https://education.rstudio.com/learn/beginner/">https://education.rstudio.com/learn/beginner/</a></li>
<li>posit Cloud の自習コース <br />
<a href="https://posit.cloud/learn/recipes/">https://posit.cloud/learn/recipes/</a></li>
<li>Data Camp のR入門コース <br />
<a href="https://onboarding.datacamp.com/">https://onboarding.datacamp.com/</a></li>

</ul>
</section>
</section>
<section>
<section id="slide-org093f98c">
<h2 id="org093f98c">多変量解析</h2>
<div class="outline-text-2" id="text-org093f98c">
</div>
</section>
<section id="slide-org1d6b013">
<h3 id="org1d6b013">多変量解析とは</h3>
<ul>
<li>複数の変量からなるデータを分析する手法の総称
<ul>
<li>回帰分析 : 複数の量を用いて注目する変数の値を説明する</li>
<li>主成分分析 : 全体を説明する少数の特徴量を構成する</li>
<li>判別分析 : 特徴量の違いでカテゴリ分けを行う</li>
<li>クラスタ分析 : 特徴量の違いに着目してクラスタを構成する</li>
<li>時系列解析 : 時間とともに変化する現象を記述する</li>

</ul></li>
<li>機械学習で使われる手法の基礎
<ul>
<li>教師あり問題 : 回帰分析(量的データ)・判別分析(質的データ)</li>
<li>教師なし問題 : 主成分分析・クラスタ分析</li>

</ul></li>

</ul>
</section>
<section id="slide-org76a83df">
<h3 id="org76a83df">回帰分析の考え方</h3>
<ul>
<li>ある変数(目的変数)を別の変数によって説明・予測するための関係式(回帰式)を構成する
<ul>
<li>単回帰 : 一つの変数で目的変数を説明する</li>
<li>重回帰 : 複数の変数で目的変数を説明する</li>

</ul></li>
<li><span style="color:green;">分析の事例</span>
<ul>
<li>広告宣伝費と商品の売上を予測する式を作り，広告効果があるかどうか判定する</li>
<li>築年数・駅からの距離・広さ・間取りで家賃を説明する式を作り，新規に家賃を設定する際に利用する</li>

</ul></li>

</ul>
</section>
<section id="slide-org12a7d0b">
<h3 id="org12a7d0b">単回帰の例 (<code>MASS::Animals</code>)</h3>
<table id="orgd500865" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 1:</span> 体重と脳の重さ</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-right">body [kg]</th>
<th scope="col" class="org-right">brain [g]</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Mountain beaver</td>
<td class="org-right">1.350</td>
<td class="org-right">8.1</td>
</tr>

<tr>
<td class="org-left">Cow</td>
<td class="org-right">465.000</td>
<td class="org-right">423.0</td>
</tr>

<tr>
<td class="org-left">Grey wolf</td>
<td class="org-right">36.330</td>
<td class="org-right">119.5</td>
</tr>

<tr>
<td class="org-left">Goat</td>
<td class="org-right">27.660</td>
<td class="org-right">115.0</td>
</tr>

<tr>
<td class="org-left">Guinea pig</td>
<td class="org-right">1.040</td>
<td class="org-right">5.5</td>
</tr>

<tr>
<td class="org-left">Dipliodocus</td>
<td class="org-right">11700.000</td>
<td class="org-right">50.0</td>
</tr>

<tr>
<td class="org-left">Asian elephant</td>
<td class="org-right">2547.000</td>
<td class="org-right">4603.0</td>
</tr>

<tr>
<td class="org-left">Donkey</td>
<td class="org-right">187.100</td>
<td class="org-right">419.0</td>
</tr>

<tr>
<td class="org-left">&#x2026;</td>
<td class="org-right">&#x2026;</td>
<td class="org-right">&#x2026;</td>
</tr>
</tbody>
</table>

</section>
<section>

<div id="org2fd7c95" class="figure">
<p><img src="./figs/r-brainbody05.png" alt="r-brainbody05.png" width="55%" height="55%" />
</p>
<p><span class="figure-number">Figure 1: </span>体重と脳の重さの関係 (単回帰)</p>
</div>
</section>
<section id="slide-org1dde9c3">
<h3 id="org1dde9c3">重回帰の例 (<code>wine.csv</code>)</h3>
<table id="org2b2f49b" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 2:</span> ワインの価格と生産環境</caption>

<colgroup>
<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">年号</th>
<th scope="col" class="org-right">価格(対数)</th>
<th scope="col" class="org-right">冬の降雨</th>
<th scope="col" class="org-right">気温</th>
<th scope="col" class="org-right">秋の降雨</th>
<th scope="col" class="org-right">経過年</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">1952</td>
<td class="org-right">-0.99868</td>
<td class="org-right">600</td>
<td class="org-right">17.1167</td>
<td class="org-right">160</td>
<td class="org-right">31</td>
</tr>

<tr>
<td class="org-right">1953</td>
<td class="org-right">-0.4544</td>
<td class="org-right">690</td>
<td class="org-right">16.7333</td>
<td class="org-right">80</td>
<td class="org-right">30</td>
</tr>

<tr>
<td class="org-right">1954</td>
<td class="org-right">NA</td>
<td class="org-right">430</td>
<td class="org-right">15.3833</td>
<td class="org-right">180</td>
<td class="org-right">29</td>
</tr>

<tr>
<td class="org-right">1955</td>
<td class="org-right">-0.80796</td>
<td class="org-right">502</td>
<td class="org-right">17.15</td>
<td class="org-right">130</td>
<td class="org-right">28</td>
</tr>

<tr>
<td class="org-right">1956</td>
<td class="org-right">NA</td>
<td class="org-right">440</td>
<td class="org-right">15.65</td>
<td class="org-right">140</td>
<td class="org-right">27</td>
</tr>

<tr>
<td class="org-right">1957</td>
<td class="org-right">-1.50926</td>
<td class="org-right">420</td>
<td class="org-right">16.1333</td>
<td class="org-right">110</td>
<td class="org-right">26</td>
</tr>

<tr>
<td class="org-right">1958</td>
<td class="org-right">-1.71655</td>
<td class="org-right">582</td>
<td class="org-right">16.4167</td>
<td class="org-right">187</td>
<td class="org-right">25</td>
</tr>

<tr>
<td class="org-right">1959</td>
<td class="org-right">-0.418</td>
<td class="org-right">485</td>
<td class="org-right">17.4833</td>
<td class="org-right">187</td>
<td class="org-right">24</td>
</tr>

<tr>
<td class="org-right">&#x2026;</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
</tr>
</tbody>
</table>

</section>
<section>

<div id="org7275e97" class="figure">
<p><img src="./figs/r-wine01.png" alt="r-wine01.png" width="55%" height="55%" />
</p>
<p><span class="figure-number">Figure 2: </span>ワインの価格と生産環境の関係</p>
</div>

</section>
<section>

<div id="org6d63eb9" class="figure">
<p><img src="./figs/r-wine05.png" alt="r-wine05.png" width="55%" height="55%" />
</p>
<p><span class="figure-number">Figure 3: </span>生産環境によるワイン価格の予測 (重回帰)</p>
</div>
</section>
<section id="slide-orgff5e1da">
<h3 id="orgff5e1da">主成分分析の考え方</h3>
<ul>
<li>多数の変数が与えられたときに，変数のもつ構造を効率的に記述できる少数個の特徴量を構成する</li>
<li><span style="color:green;">分析の事例</span>
<ul>
<li>野球選手の打撃成績(打率，本塁打数，打点など)から，打者としての特徴を記述する指標を作成する</li>
<li>複数銘柄からなる株価の時系列データから，市場全体の変動を記述する総合指標を作成する</li>

</ul></li>

</ul>
</section>
<section id="slide-org5dfb5ed">
<h3 id="org5dfb5ed">主成分分析の例 (<code>jpamenity.csv</code>)</h3>
<table id="org4ae8aea" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 3:</span> 県別の生活環境(一部)</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-right">昼夜人口比</th>
<th scope="col" class="org-right">年少人口比</th>
<th scope="col" class="org-right">老年人口比</th>
<th scope="col" class="org-right">人口増減率</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">北海道</td>
<td class="org-right">100.0</td>
<td class="org-right">11.7</td>
<td class="org-right">26.0</td>
<td class="org-right">-0.47</td>
</tr>

<tr>
<td class="org-left">青森県</td>
<td class="org-right">100.0</td>
<td class="org-right">12.1</td>
<td class="org-right">27.0</td>
<td class="org-right">-0.95</td>
</tr>

<tr>
<td class="org-left">岩手県</td>
<td class="org-right">99.7</td>
<td class="org-right">12.4</td>
<td class="org-right">27.9</td>
<td class="org-right">-0.84</td>
</tr>

<tr>
<td class="org-left">宮城県</td>
<td class="org-right">100.2</td>
<td class="org-right">13.0</td>
<td class="org-right">22.9</td>
<td class="org-right">-0.09</td>
</tr>

<tr>
<td class="org-left">秋田県</td>
<td class="org-right">99.9</td>
<td class="org-right">11.1</td>
<td class="org-right">30.7</td>
<td class="org-right">-1.12</td>
</tr>

<tr>
<td class="org-left">山形県</td>
<td class="org-right">99.8</td>
<td class="org-right">12.6</td>
<td class="org-right">28.3</td>
<td class="org-right">-0.78</td>
</tr>

<tr>
<td class="org-left">福島県</td>
<td class="org-right">99.6</td>
<td class="org-right">12.9</td>
<td class="org-right">26.1</td>
<td class="org-right">-1.41</td>
</tr>

<tr>
<td class="org-left">茨城県</td>
<td class="org-right">97.2</td>
<td class="org-right">13.2</td>
<td class="org-right">23.8</td>
<td class="org-right">-0.51</td>
</tr>

<tr>
<td class="org-left">&#x2026;</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
</tr>
</tbody>
</table>

</section>
<section>

<div id="orgd7fd18c" class="figure">
<p><img src="./figs/p-jpamenity01.png" alt="p-jpamenity01.png" width="55%" height="55%" />
</p>
<p><span class="figure-number">Figure 4: </span>県別の生活環境(人口動態)の散布図</p>
</div>

</section>
<section>

<div id="org994a32b" class="figure">
<p><img src="./figs/p-jpamenity02.png" alt="p-jpamenity02.png" width="55%" height="55%" />
</p>
<p><span class="figure-number">Figure 5: </span>県別の生活環境(教育・労働)の散布図</p>
</div>

</section>
<section>

<div id="orgc9cbb23" class="figure">
<p><img src="./figs/p-jpamenity03.png" alt="p-jpamenity03.png" width="55%" height="55%" />
</p>
<p><span class="figure-number">Figure 6: </span>県別の生活環境(貯蓄・余暇)の散布図</p>
</div>

</section>
<section>

<div id="orgfefa539" class="figure">
<p><img src="./figs/p-jpamenity06.png" alt="p-jpamenity06.png" width="55%" height="55%" />
</p>
<p><span class="figure-number">Figure 7: </span>県別の生活環境の主成分分析</p>
</div>
</section>
<section id="slide-org973803b">
<h3 id="org973803b">判別分析の考え方</h3>
<ul>
<li>ある個体が複数のクラスのいずれかに属するとき，その個体の特徴量からどのクラスに属するかを予測するモデルを構築する</li>
<li><span style="color:green;">分析の事例</span>
<ul>
<li>食道がんを患っている人とそうでない人を，年齢・飲酒量・喫煙度から判別する</li>
<li>銀行が融資判断をするために，企業の財務データから，その企業が期間内に債務不履行となるか否かを予測する</li>

</ul></li>

</ul>
</section>
<section id="slide-orgba7442e">
<h3 id="orgba7442e">判別分析の例 (<code>MASS::biopsy</code>)</h3>
<table id="orgf637938" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 4:</span> 乳癌患者の生研検査</caption>

<colgroup>
<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">ID</th>
<th scope="col" class="org-right">V1</th>
<th scope="col" class="org-right">V2</th>
<th scope="col" class="org-right">V3</th>
<th scope="col" class="org-right">V4</th>
<th scope="col" class="org-right">V5</th>
<th scope="col" class="org-right">V6</th>
<th scope="col" class="org-right">V7</th>
<th scope="col" class="org-right">V8</th>
<th scope="col" class="org-right">V9</th>
<th scope="col" class="org-left">class</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">1000025</td>
<td class="org-right">5</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">2</td>
<td class="org-right">1</td>
<td class="org-right">3</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-left">benign</td>
</tr>

<tr>
<td class="org-right">1002945</td>
<td class="org-right">5</td>
<td class="org-right">4</td>
<td class="org-right">4</td>
<td class="org-right">5</td>
<td class="org-right">7</td>
<td class="org-right">10</td>
<td class="org-right">3</td>
<td class="org-right">2</td>
<td class="org-right">1</td>
<td class="org-left">benign</td>
</tr>

<tr>
<td class="org-right">1015425</td>
<td class="org-right">3</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">2</td>
<td class="org-right">2</td>
<td class="org-right">3</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-left">benign</td>
</tr>

<tr>
<td class="org-right">1016277</td>
<td class="org-right">6</td>
<td class="org-right">8</td>
<td class="org-right">8</td>
<td class="org-right">1</td>
<td class="org-right">3</td>
<td class="org-right">4</td>
<td class="org-right">3</td>
<td class="org-right">7</td>
<td class="org-right">1</td>
<td class="org-left">benign</td>
</tr>

<tr>
<td class="org-right">1017023</td>
<td class="org-right">4</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">3</td>
<td class="org-right">2</td>
<td class="org-right">1</td>
<td class="org-right">3</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-left">benign</td>
</tr>

<tr>
<td class="org-right">1017122</td>
<td class="org-right">8</td>
<td class="org-right">10</td>
<td class="org-right">10</td>
<td class="org-right">8</td>
<td class="org-right">7</td>
<td class="org-right">10</td>
<td class="org-right">9</td>
<td class="org-right">7</td>
<td class="org-right">1</td>
<td class="org-left">malignant</td>
</tr>

<tr>
<td class="org-right">1018099</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">2</td>
<td class="org-right">10</td>
<td class="org-right">3</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-left">benign</td>
</tr>

<tr>
<td class="org-right">1018561</td>
<td class="org-right">2</td>
<td class="org-right">1</td>
<td class="org-right">2</td>
<td class="org-right">1</td>
<td class="org-right">2</td>
<td class="org-right">1</td>
<td class="org-right">3</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-left">benign</td>
</tr>

<tr>
<td class="org-right">&#x2026;</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-left">&#x2026;</td>
</tr>
</tbody>
</table>

</section>
<section>

<div id="org0cd0d13" class="figure">
<p><img src="./figs/d-biopsy01.png" alt="d-biopsy01.png" width="55%" height="55%" />
</p>
<p><span class="figure-number">Figure 8: </span>乳癌患者(良性・悪性)の生研検査の散布図</p>
</div>

</section>
<section>

<div id="org258de5e" class="figure">
<p><img src="./figs/d-biopsy02.png" alt="d-biopsy02.png" width="55%" height="55%" />
</p>
<p><span class="figure-number">Figure 9: </span>生研検査の主成分分析</p>
</div>

</section>
<section>

<div id="org7474e0f" class="figure">
<p><img src="./figs/d-biopsy03.png" alt="d-biopsy03.png" width="55%" height="55%" />
</p>
<p><span class="figure-number">Figure 10: </span>生研検査による乳癌患者の判別分析</p>
</div>
</section>
<section id="slide-org2e5142c">
<h3 id="org2e5142c">クラスタ分析の考え方</h3>
<ul>
<li>特徴量の違いに着目して，妥当な個体のグループ(クラスタ)を構成する
<ul>
<li>階層的な方法 : 系統樹を作成する</li>
<li>非階層的な方法 : グループの代表値を推定する</li>

</ul></li>
<li><span style="color:green;">分析の事例</span>
<ul>
<li>映画に関するアンケート調査から潜在的なジャンル(グループ)を抽出する</li>
<li>顧客の購買履歴から，嗜好の異なる顧客グループに分類し，グループごとの販売戦略を立てる</li>

</ul></li>

</ul>
</section>
<section id="slide-org722adc2">
<h3 id="org722adc2">クラスタ分析の例 (<code>omusubi.csv</code>)</h3>
<table id="org057c71f" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 5:</span> おむすびの具に関するアンケート</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-right">梅</th>
<th scope="col" class="org-right">鮭</th>
<th scope="col" class="org-right">昆布</th>
<th scope="col" class="org-right">鰹</th>
<th scope="col" class="org-right">明太</th>
<th scope="col" class="org-right">鱈子</th>
<th scope="col" class="org-right">ツナ</th>
<th scope="col" class="org-right">他</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">北海道</td>
<td class="org-right">13.86</td>
<td class="org-right">27.94</td>
<td class="org-right">5.58</td>
<td class="org-right">5.26</td>
<td class="org-right">9.26</td>
<td class="org-right">15.06</td>
<td class="org-right">11.61</td>
<td class="org-right">11.39</td>
</tr>

<tr>
<td class="org-left">青森</td>
<td class="org-right">14.93</td>
<td class="org-right">30.79</td>
<td class="org-right">7.01</td>
<td class="org-right">2.43</td>
<td class="org-right">10.36</td>
<td class="org-right">11.58</td>
<td class="org-right">11.58</td>
<td class="org-right">11.28</td>
</tr>

<tr>
<td class="org-left">岩手</td>
<td class="org-right">17.91</td>
<td class="org-right">23.13</td>
<td class="org-right">5.22</td>
<td class="org-right">3.35</td>
<td class="org-right">17.91</td>
<td class="org-right">10.07</td>
<td class="org-right">10.44</td>
<td class="org-right">11.94</td>
</tr>

<tr>
<td class="org-left">宮城</td>
<td class="org-right">15.16</td>
<td class="org-right">29.5</td>
<td class="org-right">10</td>
<td class="org-right">1.66</td>
<td class="org-right">14.83</td>
<td class="org-right">8.83</td>
<td class="org-right">12.83</td>
<td class="org-right">7.16</td>
</tr>

<tr>
<td class="org-left">秋田</td>
<td class="org-right">10.63</td>
<td class="org-right">31.38</td>
<td class="org-right">5.31</td>
<td class="org-right">3.19</td>
<td class="org-right">14.89</td>
<td class="org-right">13.29</td>
<td class="org-right">10.63</td>
<td class="org-right">10.63</td>
</tr>

<tr>
<td class="org-left">山形</td>
<td class="org-right">16.58</td>
<td class="org-right">20.27</td>
<td class="org-right">8.29</td>
<td class="org-right">1.38</td>
<td class="org-right">18.89</td>
<td class="org-right">10.13</td>
<td class="org-right">12.9</td>
<td class="org-right">11.52</td>
</tr>

<tr>
<td class="org-left">福島</td>
<td class="org-right">12.37</td>
<td class="org-right">21.99</td>
<td class="org-right">8.93</td>
<td class="org-right">3.43</td>
<td class="org-right">16.49</td>
<td class="org-right">9.62</td>
<td class="org-right">19.24</td>
<td class="org-right">7.9</td>
</tr>

<tr>
<td class="org-left">茨城</td>
<td class="org-right">15.42</td>
<td class="org-right">26.49</td>
<td class="org-right">7.98</td>
<td class="org-right">2.54</td>
<td class="org-right">18.33</td>
<td class="org-right">11.79</td>
<td class="org-right">11.79</td>
<td class="org-right">5.62</td>
</tr>

<tr>
<td class="org-left">&#x2026;</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
</tr>
</tbody>
</table>

</section>
<section>

<div id="org9684f01" class="figure">
<p><img src="./figs/c-omusubi01.png" alt="c-omusubi01.png" width="55%" height="55%" />
</p>
<p><span class="figure-number">Figure 11: </span>おむすびの具に関するアンケート分析 (県別の集計)</p>
</div>

</section>
<section>

<div id="org06793a1" class="figure">
<p><img src="./figs/c-omusubi02.png" alt="c-omusubi02.png" width="55%" height="55%" />
</p>
<p><span class="figure-number">Figure 12: </span>アンケート結果にもとづく県のクラスタ分析</p>
</div>
</section>
<section id="slide-orgfe17f42">
<h3 id="orgfe17f42">時系列解析の考え方</h3>
<ul>
<li>時間とともに変化する現象を記述するために，未来の値を過去の値で近似する式を構成する
<ul>
<li>自己回帰 (ARモデル) : 過去の影響の記述</li>
<li>移動平均 (MAモデル) : 記憶のある不確定性</li>

</ul></li>
<li><span style="color:green;">分析の事例</span>
<ul>
<li>市町村の過去の年齢別の人口変動から将来の人口比率の推移を予測する</li>
<li>食品・飲料の季節ごとの販売履歴から，将来の需要量を予測して生産計画を立てる</li>

</ul></li>

</ul>
</section>
<section id="slide-org8d39d17">
<h3 id="org8d39d17">時系列解析の例 (<code>datasets::AirPassengers</code>)</h3>
<table id="orga095b1d" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 6:</span> 米国航空機旅客量の変遷</caption>

<colgroup>
<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">&#xa0;</th>
<th scope="col" class="org-right">Jan</th>
<th scope="col" class="org-right">Feb</th>
<th scope="col" class="org-right">Mar</th>
<th scope="col" class="org-right">Apr</th>
<th scope="col" class="org-right">May</th>
<th scope="col" class="org-right">Jun</th>
<th scope="col" class="org-right">Jul</th>
<th scope="col" class="org-right">Aug</th>
<th scope="col" class="org-right">Sep</th>
<th scope="col" class="org-left">&#x2026;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">1949</td>
<td class="org-right">112</td>
<td class="org-right">118</td>
<td class="org-right">132</td>
<td class="org-right">129</td>
<td class="org-right">121</td>
<td class="org-right">135</td>
<td class="org-right">148</td>
<td class="org-right">148</td>
<td class="org-right">136</td>
<td class="org-left">&#x2026;</td>
</tr>

<tr>
<td class="org-right">1950</td>
<td class="org-right">115</td>
<td class="org-right">126</td>
<td class="org-right">141</td>
<td class="org-right">135</td>
<td class="org-right">125</td>
<td class="org-right">149</td>
<td class="org-right">170</td>
<td class="org-right">170</td>
<td class="org-right">158</td>
<td class="org-left">&#x2026;</td>
</tr>

<tr>
<td class="org-right">1951</td>
<td class="org-right">145</td>
<td class="org-right">150</td>
<td class="org-right">178</td>
<td class="org-right">163</td>
<td class="org-right">172</td>
<td class="org-right">178</td>
<td class="org-right">199</td>
<td class="org-right">199</td>
<td class="org-right">184</td>
<td class="org-left">&#x2026;</td>
</tr>

<tr>
<td class="org-right">1952</td>
<td class="org-right">171</td>
<td class="org-right">180</td>
<td class="org-right">193</td>
<td class="org-right">181</td>
<td class="org-right">183</td>
<td class="org-right">218</td>
<td class="org-right">230</td>
<td class="org-right">242</td>
<td class="org-right">209</td>
<td class="org-left">&#x2026;</td>
</tr>

<tr>
<td class="org-right">1953</td>
<td class="org-right">196</td>
<td class="org-right">196</td>
<td class="org-right">236</td>
<td class="org-right">235</td>
<td class="org-right">229</td>
<td class="org-right">243</td>
<td class="org-right">264</td>
<td class="org-right">272</td>
<td class="org-right">237</td>
<td class="org-left">&#x2026;</td>
</tr>

<tr>
<td class="org-right">1954</td>
<td class="org-right">204</td>
<td class="org-right">188</td>
<td class="org-right">235</td>
<td class="org-right">227</td>
<td class="org-right">234</td>
<td class="org-right">264</td>
<td class="org-right">302</td>
<td class="org-right">293</td>
<td class="org-right">259</td>
<td class="org-left">&#x2026;</td>
</tr>

<tr>
<td class="org-right">1955</td>
<td class="org-right">242</td>
<td class="org-right">233</td>
<td class="org-right">267</td>
<td class="org-right">269</td>
<td class="org-right">270</td>
<td class="org-right">315</td>
<td class="org-right">364</td>
<td class="org-right">347</td>
<td class="org-right">312</td>
<td class="org-left">&#x2026;</td>
</tr>

<tr>
<td class="org-right">&#x2026;</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-right">..</td>
<td class="org-left">&#x2026;</td>
</tr>
</tbody>
</table>

</section>
<section>

<div id="org22e750c" class="figure">
<p><img src="./figs/t-airpass01.png" alt="t-airpass01.png" width="55%" height="55%" />
</p>
<p><span class="figure-number">Figure 13: </span>米国航空機旅客量の変遷</p>
</div>

</section>
<section>

<div id="org959601e" class="figure">
<p><img src="./figs/t-airpass04.png" alt="t-airpass04.png" width="55%" height="55%" />
</p>
<p><span class="figure-number">Figure 14: </span>階差時系列の自己相関分析</p>
</div>

</section>
<section>

<div id="org101ec92" class="figure">
<p><img src="./figs/t-airpass12.png" alt="t-airpass12.png" width="55%" height="55%" />
</p>
<p><span class="figure-number">Figure 15: </span>航空機旅客量の予測 (SARIMAモデルによる)</p>
</div>
</section>
</section>
<section>
<section id="slide-org54f972c">
<h2 id="org54f972c">RStudio の構成</h2>
<div class="outline-text-2" id="text-org54f972c">
</div>
</section>
<section id="slide-org6b78272">
<h3 id="org6b78272">起動画面</h3>
<ul>
<li>以下 <b>RStudio</b> を用いて説明</li>
<li>複数の <b>タブ</b> (tab; つまみ) を含む4つの <b>ペイン</b> (pane; 枠) が立ち上がる
<ul>
<li>左上 : エディタ・表など (開いていない場合もある)</li>
<li>左下 : コンソール・ターミナルなど</li>
<li>右上 : 作業環境内の変数・コマンド履歴など</li>
<li>右下 : パッケージ・グラフィックス・ヘルプなど</li>

</ul></li>
<li>ペインの配置や数は個別に設定することが可能
<ul>
<li>メニュー : <b>Tools &gt; Global Options</b> で設定</li>

</ul></li>

</ul>
</section>
<section id="slide-orgcd14595">
<h3 id="orgcd14595">コンソール (左下ペイン)</h3>
<ul>
<li>R言語で記述されたコマンドを入力
<ul>
<li><p>
例えば以下のような計算を行うことができる
</p>
<div class="org-src-container">

<pre class="src src-R"><span style="color: #6272a4; font-weight: bold;">#</span><span style="color: #6272a4; font-weight: bold;">'</span><span style="color: #6272a4;"> &#19968;&#33324;&#30340;&#12394;&#25968;&#24335;&#12434;&#20837;&#21147;&#12377;&#12428;&#12400;&#35336;&#31639;&#27231;&#12392;&#12375;&#12390;&#20351;&#12360;&#12427;</span>
<span style="color: #6272a4; font-weight: bold;">#</span><span style="color: #6272a4; font-weight: bold;">'</span><span style="color: #6272a4;"> "#" &#20197;&#38477;&#12399;&#12467;&#12513;&#12531;&#12488;&#12392;&#12375;&#12390;&#28961;&#35222;&#12373;&#12428;&#12427;</span>
1 + 2 + 3 + 4 <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#31354;&#30333;&#12399;&#28961;&#35222;&#12373;&#12428;&#12427;</span>
sin(pi/3) / cos(pi/3) <span style="color: #6272a4;"># </span><span style="color: #6272a4;">tan(pi/3) &#12395;&#12394;&#12427;&#12399;&#12378;</span>
</pre>
</div></li>
<li><p>
コンソール上で終了を指示する以下のコマンドを入力すれば
R を終了させることができる
</p>
<div class="org-src-container">

<pre class="src src-R"><span style="color: #6272a4; font-weight: bold;">#</span><span style="color: #6272a4; font-weight: bold;">'</span><span style="color: #6272a4;"> R &#12398;&#32066;&#20102;&#12395;&#12399; q() &#12414;&#12383;&#12399; quit() &#12434;&#29992;&#12356;&#12427;</span>
q()
</pre>
</div>
<ul>
<li>メニューの <b>Quit RStudio</b> も利用可能</li>
<li>終了できない場合はOSの機能で強制終了する必要がある</li>

</ul></li>

</ul></li>

</ul>
</section>
<section id="slide-org3a112bb">
<h3 id="org3a112bb">エディタ (左上ペイン)</h3>
<ul>
<li>コマンドを記述したファイルを操作</li>
<li>一連のコマンドをまとめたり修正しながら実行
<ul>
<li>コンソールに入力したコマンドは直ちに実行されてしまう</li>
<li>コマンドを実行順に記述したファイル <b>R Script</b> を作成</li>
<li>ファイル(の一部)を実行</li>
<li>ファイルを保存</li>

</ul></li>
<li><p>
同一ファイル内でプログラムと文書の記述も可能
</p>
<ul>
<li>R Markdown</li>
<li>Quarto</li>

</ul>
<p>
(本講義では扱わない)
</p></li>

</ul>
</section>
<section id="slide-orga82c9a1">
<h3 id="orga82c9a1">ヘルプ (右下ペイン)</h3>
<ul>
<li>各関数の詳細を記述したヘルプが参照可能
<ul>
<li>機能，引数名，引数の既定値，実行例など</li>

</ul></li>
<li>ヘルプ内の検索はその下の <b>Find in Topic</b> で可能</li>
<li>コンソール内では関数 <code>help()</code> や <code>?</code> などを利用</li>

</ul>
</section>
<section id="slide-orgfe77da4">
<h3 id="orgfe77da4">パッケージ (右下ペイン)</h3>
<ul>
<li>パッケージを用いて機能を拡張</li>
<li>RStudio でのインストール手順
<ul>
<li>右下ペイン <b>Package</b> タブをクリック</li>
<li>左上の <b>Install</b> をクリック</li>
<li>パッケージ名を入力し <b>Install</b> をクリック</li>

</ul></li>
<li>利用可能なパッケージの情報は
右下ペイン <b>Package</b> タブで確認できる</li>

</ul>
</section>
<section id="slide-orged12653">
<h3 id="orged12653">作業ディレクトリ</h3>
<ul>
<li>プログラムが実行されるディレクトリ(フォルダ)</li>
<li>作業ディレクトリにあるファイルの読み書きはパスを指定する必要がない</li>
<li>現在の作業ディレクトリは <b>Console</b> タブで確認</li>
<li>メニュー : <b>Session &gt; Set Working Directory</b> で指定
<ul>
<li>読み込んだファイルの場所を選択</li>
<li><b>Files</b> タブ (右下ペイン) の場所を選択 (<b>More</b> からも選択可)</li>
<li>ディレクトリを直接選択</li>

</ul></li>

</ul>
</section>
<section id="slide-org42da8ab">
<h3 id="org42da8ab">プロジェクト</h3>
<ul>
<li>作業環境をまとめて設定・保存する機能
<ul>
<li>作成したプロジェクトは <b>Project</b> ボタン(右上)から選択可能</li>
<li>いつでもプロジェクトを中断可能</li>
<li>プロジェクト毎に履歴や変数を保存可能</li>
<li>複数のプロジェクトを定義可能</li>

</ul></li>
<li>一般的なプロジェクトの作成手順
<ul>
<li><b>Project</b> ボタンから <b>New Project</b> を選択</li>
<li><b>Create Project</b> ダイアログで <b>New Directory</b> を選択
<ul>
<li>既にあるディレクトリを用いる場合は <b>Existing Directory</b></li>
<li>Github などを利用する場合は <b>Version Control</b></li>

</ul></li>
<li><b>Project Type</b> ダイアログで <b>New Project</b> を選択</li>
<li><b>Directry Name</b> とその親ディレクトリを指定</li>

</ul></li>

</ul>
</section>
<section id="slide-orgdf7c090">
<h3 id="orgdf7c090">終了時の注意</h3>
<ul>
<li><p>
終了時にコンソールに以下のメッセージが表示される場合がある
</p>
<div class="org-src-container">

<pre class="src src-R">&gt; q()
Save workspace image? [y/n/c]:     
</pre>
</div></li>
<li>作業で使った変数などをセーブするか尋ねている
<ul>
<li><code>y</code> を入力: セーブする (yesの略)</li>
<li><code>n</code> を入力: セーブしない (noの略)</li>
<li><code>c</code> を入力: Rの終了をキャンセルする (cancelの略)</li>

</ul></li>
<li>セーブした場合次回起動時に読み込まれる</li>

</ul>
</section>
</section>
<section>
<section id="slide-orgce6ad6e">
<h2 id="orgce6ad6e">基本的な使い方</h2>
<div class="outline-text-2" id="text-orgce6ad6e">
</div>
</section>
<section id="slide-org6bed8d8">
<h3 id="org6bed8d8">計算をする</h3>
<ul>
<li>四則演算や数学関数は直感的な文法で計算可能</li>

</ul>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 7:</span> 基本的な演算と関数</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">加減乗除</td>
<td class="org-left"><code>+, -, *, /</code></td>
</tr>

<tr>
<td class="org-left">羃乗</td>
<td class="org-left"><code>^</code> または <code>**</code></td>
</tr>

<tr>
<td class="org-left">三角関数</td>
<td class="org-left"><code>sin(), cos(), tan()</code></td>
</tr>

<tr>
<td class="org-left">逆三角関数</td>
<td class="org-left"><code>asin(), acos(), atan()</code></td>
</tr>

<tr>
<td class="org-left">指数関数</td>
<td class="org-left"><code>exp()</code></td>
</tr>

<tr>
<td class="org-left">対数関数</td>
<td class="org-left"><code>log(), log10(), log2()</code></td>
</tr>

<tr>
<td class="org-left">双曲線関数</td>
<td class="org-left"><code>sinh(), cosh(), tanh()</code></td>
</tr>

<tr>
<td class="org-left">平方根</td>
<td class="org-left"><code>sqrt()</code></td>
</tr>

<tr>
<td class="org-left">絶対値</td>
<td class="org-left"><code>abs()</code></td>
</tr>
</tbody>
</table>
</section>
<section id="slide-org8e48359">
<h3 id="org8e48359">電卓として使う</h3>
<ul>
<li><p>
<span style="color:green;">コンソール上での計算例</span>
</p>
<div class="org-src-container">

<pre class="src src-R"><span style="color: #6272a4; font-weight: bold;">#</span><span style="color: #6272a4; font-weight: bold;">'</span><span style="color: #6272a4;"> &#19982;&#12360;&#12425;&#12428;&#12383;&#24335;&#12398;&#35336;&#31639;&#12434;&#12467;&#12531;&#12477;&#12540;&#12523;&#19978;&#12391;&#23455;&#34892;&#12375;&#12390;&#12415;&#12424;&#12358;</span>
<span style="color: #6272a4; font-weight: bold;">#</span><span style="color: #6272a4; font-weight: bold;">'</span><span style="color: #6272a4;"> 1 x 2 + 3^2 &#12398;&#35336;&#31639;</span>
1 * 2 + 3^2
<span style="color: #6272a4; font-weight: bold;">#</span><span style="color: #6272a4; font-weight: bold;">'</span><span style="color: #6272a4;"> sin(2&#960;) &#12398;&#35336;&#31639;</span>
sin(2*pi)
<span style="color: #6272a4; font-weight: bold;">#</span><span style="color: #6272a4; font-weight: bold;">'</span><span style="color: #6272a4;"> &#8730;2 + |-0.6| &#12398;&#35336;&#31639;</span>
sqrt(2) + abs(-0.6)
</pre>
</div>

<pre class="example">
[1] 11
[1] -2.449294e-16
[1] 2.014214
</pre></li>

<li>入力内容は右上の <b>History</b> タブで確認可能</li>

</ul>
</section>
<section id="slide-org51c2989">
<h3 id="org51c2989">エディタから実行する</h3>
<ul>
<li>新規ファイルの作成 (以下のいずれか)
<ul>
<li>左上の <b>+</b> から
<b>R Script</b> を選択</li>
<li><b>File</b> から
<b>New File</b> を選択，
更に <b>R Script</b> を選択</li>

</ul></li>
<li>エディタ上でコマンドを記述</li>
<li>実行範囲の選択
<ul>
<li>一行のみ: カーソルをその行に移動</li>
<li>複数行: クリックしてながら移動して選択する</li>

</ul></li>
<li>選択範囲の実行 (以下のいずれか)
<ul>
<li>左上の <b>Run</b> をクリック</li>
<li><b>Code</b> から 
<b>Selected Line(s)</b> を選択
(Ctrl/Command+Enter)</li>

</ul></li>

</ul>
</section>
<section id="slide-org5339b1a">
<h3 id="org5339b1a">R Script ファイルを保存する</h3>
<ul>
<li>以下のいずれかで保存することができる
<ul>
<li>左上のディスクのマークをクリック</li>
<li><b>File</b> から 
<b>Save</b> を選択 (Ctrl/Command+S)</li>

</ul></li>
<li>ファイル作成に関する注意
<ul>
<li>保存する時にファイル名の入力が求められる</li>
<li>拡張子は通常
<b>.R</b> または
<b>.r</b> を利用する</li>
<li><b>#</b> 以降の文字列は実行されないのでコメントとして有用</li>

</ul></li>

</ul>
</section>
<section id="slide-orgf4a4efd">
<h3 id="orgf4a4efd">関数</h3>
<ul>
<li>関数の取り扱いは一般的な計算機言語とほぼ同様
<ul>
<li>関数は引数とその値を指定して実行(引数がない場合もある)</li>
<li>引数名は順序を守れば省略可能</li>

</ul></li>
<li><p>
関数の呼び出し方 (関数名を <code>f</code> とする)
</p>
<div class="org-src-container">

<pre class="src src-R">f(arg1 = value1, arg2 = value2) <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#25836;&#20284;&#12467;&#12540;&#12489;</span>
<span style="color: #6272a4; font-weight: bold;">#</span><span style="color: #6272a4; font-weight: bold;">'</span><span style="color: #6272a4;"> arg1, arg2 &#12399;&#24341;&#25968;&#12398;&#21517;&#21069;&#65292;value1, value2 &#12399;&#24341;&#25968;&#12395;&#28193;&#12377;&#20516;&#12434;&#34920;&#12377;</span>
f(value1, value2) <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#19978;&#12392;&#21516;&#20516;&#65294;&#38918;&#24207;&#12395;&#27880;&#24847;</span>
</pre>
</div>
<ul>
<li><b>擬似コード</b> = 実行しても動かないコード</li>

</ul></li>
<li>実装されている関数の使い方は <code>help(関数名)</code> または <code>?関数名</code> で
ヘルプが表示される</li>

</ul>
</section>
<section id="slide-org4d02787">
<h3 id="org4d02787">関数の実行例</h3>
<ul>
<li><p>
<span style="color:green;">正弦関数の計算</span>
</p>
<div class="org-src-container">

<pre class="src src-R"><span style="color: #6272a4; font-weight: bold;">#</span><span style="color: #6272a4; font-weight: bold;">'</span><span style="color: #6272a4;"> &#27491;&#24358;&#38306;&#25968;(&#24341;&#25968;&#12364;1&#12388;)&#12398;&#35336;&#31639;&#20363;</span>
sin(x = pi/2) 
sin(pi/2) <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#24341;&#25968;&#21517;&#12399;&#30465;&#30053;&#12391;&#12365;&#65292;&#21069;&#12398;&#34892;&#12392;&#12371;&#12398;&#34892;&#12399;&#21516;&#12376;&#32080;&#26524;&#12395;&#12394;&#12427;</span>
</pre>
</div></li>
<li><p>
<span style="color:green;">対数関数の計算</span>
</p>
<div class="org-src-container">

<pre class="src src-R"><span style="color: #6272a4; font-weight: bold;">#</span><span style="color: #6272a4; font-weight: bold;">'</span><span style="color: #6272a4;"> &#23550;&#25968;&#38306;&#25968;(&#24341;&#25968;&#12364;2&#12388;)&#12398;&#35336;&#31639;&#20363;</span>
<span style="color: #6272a4; font-weight: bold;">#</span><span style="color: #6272a4; font-weight: bold;">'</span><span style="color: #6272a4;"> &#20197;&#19979;&#12399;&#25836;&#20284;&#12467;&#12540;&#12489;&#65294;a, b &#12434;&#36969;&#24403;&#12394;&#25968;&#20516;&#12395;&#32622;&#12365;&#25563;&#12360;&#12390;&#23455;&#34892;&#12375;&#12394;&#12373;&#12356;</span>
log(a, b) <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#24213;&#12434; b &#12392;&#12377;&#12427; a &#12398;&#23550;&#25968; </span>
log(x = a, base = b) <span style="color: #6272a4;">#</span><span style="color: #6272a4;">&#19978;&#12392;&#21516;&#20516;</span>
log(base = b, x = a) <span style="color: #6272a4;">#</span><span style="color: #6272a4;">&#19978;&#12392;&#21516;&#20516;(&#24341;&#25968;&#21517;&#12364;&#12354;&#12428;&#12400;&#38918;&#24207;&#12399;&#33258;&#30001;&#12395;&#22793;&#12360;&#12425;&#12428;&#12427;)</span>
log(b, a) <span style="color: #6272a4;"># </span><span style="color: #6272a4;">= log(x=b,base=a) (&#24341;&#25968;&#21517;&#12364;&#12394;&#12369;&#12428;&#12400;&#35215;&#23450;&#12398;&#38918;&#24207;&#12391;&#35299;&#37320;&#12373;&#12428;&#12427;)</span>
log(a) <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#33258;&#28982;&#23550;&#25968; =log(a,base=exp(1))</span>
</pre>
</div></li>

</ul>
</section>
<section id="slide-org32bce69">
<h3 id="org32bce69">ヘルプ機能</h3>
<ul>
<li>各関数の詳細を記述したヘルプが用意されている
<ul>
<li>Description (機能の概要)</li>
<li>Usage (関数の呼び出し方)</li>
<li>Arguments (関数の引数)</li>
<li>Value (関数の返り値)</li>
<li>Examples (実行例)</li>

</ul></li>
<li>ヘルプに関連する関数
<ul>
<li><code>help()</code> (使い方や例の表示)</li>
<li><code>example()</code> (例を実際に実行してくれる)</li>
<li><code>help.search()</code> (キーワード検索)</li>

</ul></li>
<li>右下ペイン <b>Help</b> タブの利用
<ul>
<li>右上にある検索窓でヘルプを参照可能</li>
<li>左上にある検索窓はヘルプ内を検索可能</li>

</ul></li>

</ul>
</section>
<section id="slide-org877e521">
<h3 id="org877e521">ヘルプ機能の利用例</h3>
<ul>
<li><p>
<span style="color:green;">ヘルプの使い方</span> 
</p>
<div class="org-src-container">

<pre class="src src-R"><span style="color: #6272a4; font-weight: bold;">#</span><span style="color: #6272a4; font-weight: bold;">'</span><span style="color: #6272a4;"> &#38306;&#25968; log() &#12395;&#38306;&#12377;&#12427;&#12504;&#12523;&#12503;&#12398;&#20363;</span>
help(log) <span style="color: #6272a4;"># </span><span style="color: #6272a4;">Help&#12479;&#12502;&#12395;&#32080;&#26524;&#12399;&#34920;&#31034;&#12373;&#12428;&#12427;</span>
?log <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#19978;&#12392;&#21516;&#20516;</span>
example(log) <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#12504;&#12523;&#12503;&#20869;&#12398;&#20363;&#12434;&#23455;&#34892;</span>
help.search(<span style="color: #f1fa8c;">"log"</span>) <span style="color: #6272a4;"># </span><span style="color: #6272a4;">"log"&#12395;&#38306;&#36899;&#12377;&#12427;&#38917;&#30446;&#12399;&#65311;</span>
??<span style="color: #f1fa8c;">"log"</span> <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#19978;&#12392;&#21516;&#20516;</span>
</pre>
</div>
<ul>
<li>右下ペインの <b>Help</b> タブに表示される</li>

</ul></li>

</ul>
</section>
<section id="slide-orgf2f2215">
<h3 id="orgf2f2215">データ型</h3>
<ul>
<li>Rではさまざまな数値を扱うことができる
<ul>
<li>実数および複素数 (指数表記にも対応)</li>
<li>無限大や不定な数など特殊なものにも対応</li>

</ul></li>

</ul>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 8:</span> 代表的なデータ型</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">型の名称</th>
<th scope="col" class="org-left">役割</th>
<th scope="col" class="org-left">例</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>numeric</code></td>
<td class="org-left">(広義の)実数を表す</td>
<td class="org-left"><code>1, pi, NaN</code></td>
</tr>

<tr>
<td class="org-left"><code>complex</code></td>
<td class="org-left">複素数を表す</td>
<td class="org-left"><code>1i, 3-4i</code></td>
</tr>

<tr>
<td class="org-left"><code>character</code></td>
<td class="org-left">文字列を表す</td>
<td class="org-left"><code>"foo", "Hello World!"</code></td>
</tr>

<tr>
<td class="org-left"><code>logical</code></td>
<td class="org-left">論理値(真偽)を表す</td>
<td class="org-left"><code>TRUE, FALSE, 3&lt;4, NA</code></td>
</tr>
</tbody>
</table>
</section>
<section id="slide-orgd3e49a3">
<h3 id="orgd3e49a3">オブジェクト</h3>
<ul>
<li>変数，関数，計算結果などを <b>オブジェクト</b> と呼ぶ</li>
<li>文字列を変数名としてオブジェクトを保持することができる</li>
<li>オブジェクトの内容を別のオブジェクトに代入することができる</li>
<li>保持しているオブジェクトの情報は右上ペインの
<b>Environment</b> タブで確認できる</li>

</ul>
</section>
<section id="slide-org98d0945">
<h3 id="org98d0945">オブジェクトの代入の例</h3>
<ul>
<li><p>
<span style="color:green;">代入操作の例</span>
</p>
<div class="org-src-container">

<pre class="src src-R"><span style="color: #6272a4; font-weight: bold;">#</span><span style="color: #6272a4; font-weight: bold;">'</span><span style="color: #6272a4;"> &#25968;&#20516;&#12434;&#22793;&#25968; foo &#12395;&#20195;&#20837;&#12377;&#12427;</span>
(foo <span style="color: #bd93f9;">&lt;-</span> 3) <span style="color: #6272a4;"># </span><span style="color: #6272a4;">foo &lt;- 3; print(foo) &#12392;&#31561;&#20385;</span>
<span style="color: #6272a4; font-weight: bold;">#</span><span style="color: #6272a4; font-weight: bold;">'</span><span style="color: #6272a4;"> &#22793;&#25968; foo &#12434;&#29992;&#12356;&#12390;&#35336;&#31639;&#12375;&#65292;&#32080;&#26524;&#12434; bar &#12395;&#20195;&#20837;&#12377;&#12427;</span>
bar <span style="color: #bd93f9;">&lt;-</span> sin(2/3*pi) + cos(foo * pi/4) <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#35336;&#31639;&#32080;&#26524;&#12399;&#34920;&#31034;&#12373;&#12428;&#12394;&#12356;</span>
<span style="color: #6272a4; font-weight: bold;">#</span><span style="color: #6272a4; font-weight: bold;">'</span><span style="color: #6272a4;"> &#22793;&#25968; bar &#12398;&#20869;&#23481;&#12434;&#34920;&#31034;&#12377;&#12427;</span>
print(bar)
</pre>
</div>

<pre class="example">
[1] 3
[1] 0.1589186
</pre>


<ul>
<li>計算結果や良く使う文字列の保存に利用できる</li>
<li>変数名は自由に決められるが，
予約語 <code>c, q, t, C, D, F, I, T</code> には注意が必要</li>

</ul></li>

</ul>
</section>
<section id="slide-org5546c6f">
<h3 id="org5546c6f">自作関数</h3>
<ul>
<li>他の言語と同様にRでも関数を定義できる</li>
<li><p>
関数の定義には関数 <code>function()</code> を利用する 
</p>
<div class="org-src-container">

<pre class="src src-R"><span style="color: #6272a4; font-weight: bold;">#</span><span style="color: #6272a4; font-weight: bold;">'</span><span style="color: #6272a4;"> &#38306;&#25968; function() &#12398;&#20351;&#12356;&#26041; (&#25836;&#20284;&#12467;&#12540;&#12489;)</span>
<span style="color: #50fa7b; font-weight: bold;">&#38306;&#25968;&#21517;</span> <span style="color: #bd93f9;">&lt;-</span> <span style="color: #ff79c6; font-weight: bold;">function</span>(&#24341;&#25968;){ <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#35336;&#31639;&#12502;&#12525;&#12483;&#12463;&#12398;&#38283;&#22987;</span>
  <span style="color: #6272a4;">## </span><span style="color: #6272a4;">&#12371;&#12398;&#12502;&#12525;&#12483;&#12463;&#20869;&#12395;&#24517;&#35201;&#12394;&#25163;&#32154;&#12365;&#12434;&#35352;&#36848;&#12377;&#12427;&#65294;&#35079;&#25968;&#34892;&#12395;&#28193;&#12387;&#12390;&#27083;&#12431;&#12394;&#12356;</span>
  <span style="color: #ff79c6; font-weight: bold;">return</span>(&#36820;&#20516;) <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#35336;&#31639;&#32080;&#26524;&#12434;&#26126;&#31034;&#30340;&#12395;&#31034;&#12377;</span>
} <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#12502;&#12525;&#12483;&#12463;&#12398;&#32066;&#20102;</span>
</pre>
</div></li>

</ul>
</section>
<section id="slide-orga22c898">
<h3 id="orga22c898">自作関数の例</h3>
<ul>
<li><p>
<span style="color:green;">縦と横の長さを与えて長方形の面積を計算</span>
</p>
<div class="org-src-container">

<pre class="src src-R"><span style="color: #6272a4; font-weight: bold;">#</span><span style="color: #6272a4; font-weight: bold;">'</span><span style="color: #6272a4;"> &#32294;&#12398;&#38263;&#12373; a, &#27178;&#12398;&#38263;&#12373; b (&#26082;&#23450;&#20516;&#12399;1) &#12398;&#38263;&#26041;&#24418;&#12398;&#38754;&#31309;</span>
<span style="color: #50fa7b; font-weight: bold;">foo</span> <span style="color: #bd93f9;">&lt;-</span> <span style="color: #ff79c6; font-weight: bold;">function</span>(a, b = 1){ 
  out <span style="color: #bd93f9;">&lt;-</span> a * b 
  <span style="color: #ff79c6; font-weight: bold;">return</span>(out) <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#35336;&#31639;&#32080;&#26524;&#12434;&#22806;&#12395;&#36820;&#21364;</span>
}
<span style="color: #6272a4; font-weight: bold;">#</span><span style="color: #6272a4; font-weight: bold;">'</span><span style="color: #6272a4;"> &#23455;&#34892;&#20363;</span>
foo(2, 3) <span style="color: #6272a4;"># </span><span style="color: #6272a4;">foo(a = 2, b = 3) &#12392;&#21516;&#32681;</span>
foo(2) <span style="color: #6272a4;"># </span><span style="color: #6272a4;">foo(a = 2, b = 1) &#12392;&#21516;&#32681;</span>
</pre>
</div>

<pre class="example">
[1] 6
[1] 2
</pre></li>

</ul>

</section>
<section>
<ul>
<li><p>
<span style="color:green;">無名関数 (anonymous function) の作り方</span>
</p>
<div class="org-src-container">

<pre class="src src-R"><span style="color: #6272a4; font-weight: bold;">#</span><span style="color: #6272a4; font-weight: bold;">'</span><span style="color: #6272a4;"> &#22793;&#25968;&#12420;&#38306;&#25968;&#12434;&#23450;&#32681;&#12375;&#12390;&#35336;&#31639;&#12377;&#12427;&#26041;&#27861;</span>
(x <span style="color: #bd93f9;">&lt;-</span> 1:10/10)
<span style="color: #50fa7b; font-weight: bold;">foo</span> <span style="color: #bd93f9;">&lt;-</span> <span style="color: #ff79c6; font-weight: bold;">function</span>(x) sin(x)/x <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#24335;&#12398;&#35336;&#31639;&#32080;&#26524;&#12434;&#36820;&#21364;(return&#12434;&#30465;&#30053;&#21487;)</span>
foo(x)
<span style="color: #6272a4; font-weight: bold;">#</span><span style="color: #6272a4; font-weight: bold;">'</span><span style="color: #6272a4;"> &#22793;&#25968;&#12420;&#38306;&#25968;&#12434;&#23450;&#32681;&#12379;&#12378;&#12395;&#35336;&#31639;&#12377;&#12427;&#26041;&#27861;</span>
(<span style="color: #ff79c6; font-weight: bold;">function</span>(x) sin(x)/x)(1:10/10)
(\(x) sin(x)/x)(1:10/10) <span style="color: #6272a4;"># </span><span style="color: #6272a4;">R 4.1 &#20197;&#38477;&#12398;&#30701;&#32302;&#34920;&#29694;</span>
</pre>
</div>

<pre class="example">
[1] 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1.0
[1] 0.9983342 0.9933467 0.9850674 0.9735459 0.9588511 0.9410708 0.9203110
 [8] 0.8966951 0.8703632 0.8414710
[1] 0.9983342 0.9933467 0.9850674 0.9735459 0.9588511 0.9410708 0.9203110
 [8] 0.8966951 0.8703632 0.8414710
[1] 0.9983342 0.9933467 0.9850674 0.9735459 0.9588511 0.9410708 0.9203110
 [8] 0.8966951 0.8703632 0.8414710
</pre>


<ul>
<li>オブジェクト(変数や関数)を作成する必要がない場合に有用</li>

</ul></li>

</ul>

</section>
<section>
<ul>
<li><p>
<span style="color:green;">練習</span>
</p>
<blockquote>
<ul>
<li>R の関数 integrate() についてヘルプを調べなさい．</li>
<li><p>
以下の関数の定積分を求めなさい．
</p>
<div>
\begin{align}
  f(x)&=\frac{1}{1+x^{2}},\quad x\in[0,1]\\
  g(x)&=\exp\left( -\frac{x^{2}}{2} \right),\quad x\in\mathbb{R}
\end{align}

</div></li>

</ul>
</blockquote></li>

</ul>

</section>
<section>
<ul>
<li><p>
<span style="color:green;">関数 integrate() を利用して定積分を計算</span>
</p>
<div class="org-src-container">

<pre class="src src-R"><span style="color: #6272a4; font-weight: bold;">#</span><span style="color: #6272a4; font-weight: bold;">'</span><span style="color: #6272a4;"> &#38306;&#25968; 1/(1+x^2) &#12434;&#21306;&#38291; [0,1] &#12391;&#31309;&#20998; (&#38306;&#25968;&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;&#12434;&#28193;&#12377;&#26360;&#12365;&#26041;)</span>
<span style="color: #50fa7b; font-weight: bold;">f</span> <span style="color: #bd93f9;">&lt;-</span> <span style="color: #ff79c6; font-weight: bold;">function</span>(x) 1/(1+x^2) <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#38306;&#25968;&#12434;&#23450;&#32681;</span>
integrate(f, 0, 1) <span style="color: #6272a4;"># </span><span style="color: #6272a4;">pi/4 </span>
<span style="color: #6272a4; font-weight: bold;">#</span><span style="color: #6272a4; font-weight: bold;">'</span><span style="color: #6272a4;"> &#38306;&#25968; e^(-x^2/2) &#12434;&#23455;&#36600;&#20840;&#20307;&#12391;&#31309;&#20998;(Gauss&#31309;&#20998;) (&#38306;&#25968;&#12434;&#23450;&#32681;&#12375;&#12394;&#12356;&#26360;&#12365;&#26041;)</span>
integrate(\(x)exp(-x^2/2), -<span style="color: #8be9fd; font-style: italic;">Inf</span>, <span style="color: #8be9fd; font-style: italic;">Inf</span>) <span style="color: #6272a4;"># </span><span style="color: #6272a4;">sqrt(2*pi)</span>
</pre>
</div>

<pre class="example">
0.7853982 with absolute error &lt; 8.7e-15
2.506628 with absolute error &lt; 0.00023
</pre></li>

</ul>
</section>
</section>
<section>
<section id="slide-orga823732">
<h2 id="orga823732">次回の予定</h2>
<ul>
<li>データの取り扱い</li>
<li>描画の基礎</li>
<li>確率シミュレーション</li>

</ul>
</div>
</div>
<script src="./reveal.js/dist/reveal.js"></script>
<script src="./reveal.js/plugin/notes/notes.js"></script>
<script src="./reveal.js/plugin/search/search.js"></script>
<script src="./reveal.js/plugin/zoom/zoom.js"></script>
<script src="./reveal.js/plugin/menu/menu.js"></script>
<script src="./reveal.js/plugin/spotlight/spotlight.js"></script>
<script src="./reveal.js/plugin/drawer/drawer.js"></script>
<script src="./reveal.js/dist/theme/hidelinks.js"></script>
<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({

controls: true,
progress: true,
history: true,
center: true,
slideNumber: 'c',
rollingLinks: false,
keyboard: true,
mouseWheel: true,
fragmentInURL: true,
hashOneBasedIndex: false,
pdfSeparateFragments: false,
overview: true,

transition: 'fade',
transitionSpeed: 'default',
showNotes: window.location.search.match( /print-pdf/gi ) ? 'separate-page' : false,
spotlight: { size: 80, initialPresentationMode: false, }, drawer: { toggleDrawKey: "d", toggleBoardKey: "c", pathSize: 3, }, keyboard: { 81: function() { RevealSpotlight.toggleSpotlight()}, 87: function() { RevealSpotlight.togglePresentationMode();}, },

// Plugins with reveal.js 4.x
plugins: [ RevealNotes, RevealSearch, RevealZoom, RevealMenu, RevealSpotlight, RevealDrawer ],

// Optional libraries used to extend reveal.js
dependencies: [
]

});
</script>
</body>
</html>
